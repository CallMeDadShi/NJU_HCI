Index: front_end/src/views/user/info.vue
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><template>\r\n    <div class=\"info-wrapper\">\r\n        <a-tabs>\r\n            <a-tab-pane tab=\"我的信息\" key=\"1\">\r\n                <a-form :form=\"form\" style=\"margin-top: 30px\">\r\n                    <a-form-item label=\"头像\" :label-col=\"{ span: 3 }\" :wrapper-col=\"{ span: 8, offset: 1 }\">\r\n                        <a-avatar\r\n                                shape=\"square\"\r\n                                size=\"large\"\r\n                                :style=\"{ backgroundColor: color, verticalAlign: 'middle' }\"\r\n                        >\r\n                            {{ avatarValue }}\r\n                        </a-avatar>\r\n                        <a-divider type=\"vertical\" ></a-divider>\r\n                        <a-button\r\n                                size=\"small\"\r\n                                :style=\"{ marginLeft: 16, verticalAlign: 'middle' }\"\r\n                                @click=\"changeValue\"\r\n                                v-if=\"modify\"\r\n                        >\r\n                            改变\r\n                        </a-button>\r\n                    </a-form-item>\r\n                    <a-form-item label=\"用户名\" :label-col=\"{ span: 3 }\" :wrapper-col=\"{ span: 8, offset: 1  }\">\r\n                        <a-input\r\n                                placeholder=\"请填写用户名\"\r\n                                v-decorator=\"['userName', { rules: [{ required: true, message: '请输入用户名' }] }]\"\r\n                                v-if=\"modify\"\r\n                        />\r\n                        <span v-else>{{ userInfo.userName }}</span>\r\n                    </a-form-item>\r\n                    <a-form-item label=\"邮箱\" :label-col=\"{ span: 3 }\" :wrapper-col=\"{ span: 8, offset: 1 }\">\r\n                        <span>{{ userInfo.email }}</span>\r\n                    </a-form-item>\r\n\r\n                    <a-form-item label=\"出生日期\" :label-col=\"{ span: 3 }\" :wrapper-col=\"{ span: 8, offset: 1 }\">\r\n                        <a-date-picker\r\n                                v-if=\"modify\"\r\n                                format=\"YYYY-MM-DD\"\r\n                                v-decorator=\"[\r\n                        'date',\r\n                        {\r\n                            rules: [{ required: true, message: '请输入出生日期' }]\r\n                        }\r\n                    ]\"\r\n                                :placeholder=\"'出生日期'\"\r\n                        />\r\n                        <a-date-picker v-else :default-value=\"moment(userInfo.birthday, 'YYYY-MM-DD')\" disabled></a-date-picker>\r\n                    </a-form-item>\r\n\r\n                    <a-form-item label=\"手机号\" :label-col=\"{ span: 3 }\" :wrapper-col=\"{ span: 8, offset: 1 }\">\r\n                        <a-input\r\n                                placeholder=\"请填写手机号\"\r\n                                v-decorator=\"['phoneNumber', { rules: [{ required: true, message: '请输入手机号' }] }]\"\r\n                                v-if=\"modify\"\r\n                        />\r\n                        <span v-else>{{ userInfo.phoneNumber}}</span>\r\n                    </a-form-item>\r\n                    <a-form-item label=\"信用值\" :label-col=\"{ span: 3 }\" :wrapper-col=\"{ span: 8, offset: 1 }\">\r\n                        <span>{{ userInfo.credit }}</span>\r\n                    </a-form-item>\r\n                    <a-form-item label=\"密码\" :label-col=\"{ span: 3 }\" :wrapper-col=\"{ span: 8, offset: 1 }\" v-if=\"modify\">\r\n                        <a-input\r\n                                placeholder=\"请输入新密码\"\r\n                                v-decorator=\"['password', { rules: [{ required: true, message: '请输入新密码' }] }]\"\r\n                        />\r\n                    </a-form-item>\r\n                    <a-form-item :wrapper-col=\"{ span: 12, offset: 5 }\" v-if=\"modify\">\r\n                        <a-button type=\"primary\" @click=\"saveModify\">\r\n                            保存\r\n                        </a-button>\r\n                        <a-button type=\"default\" style=\"margin-left: 30px\" @click=\"cancelModify\">\r\n                            取消\r\n                        </a-button>\r\n                    </a-form-item>\r\n                    <a-form-item :wrapper-col=\"{ span: 8, offset: 4 }\" v-else>\r\n                        <a-button type=\"primary\" @click=\"modifyInfo\">\r\n                            修改信息\r\n                        </a-button>\r\n                    </a-form-item>\r\n                </a-form>\r\n            </a-tab-pane>\r\n            <a-tab-pane tab=\"我的订单\" key=\"2\" v-if=\"userInfo.userType=='Client'\">\r\n                <a-table\r\n                        :columns=\"columns\"\r\n                        :dataSource=\"userOrderList\"\r\n                        bordered\r\n                >\r\n                    <span slot=\"price\" slot-scope=\"text\">\r\n                        <span>￥{{ text }}</span>\r\n                    </span>\r\n                    <span slot=\"roomType\" slot-scope=\"text\">\r\n                        <span v-if=\"text == 'BigBed'\">大床房</span>\r\n                        <span v-if=\"text == 'DoubleBed'\">双床房</span>\r\n                        <span v-if=\"text == 'Family'\">家庭房</span>\r\n                    </span>\r\n                    <a-tag slot=\"orderState\" color=\"blue\" slot-scope=\"text\">\r\n                        {{ text }}\r\n                    </a-tag>\r\n                    <span slot=\"action\" slot-scope=\"record\">\r\n<!--                        <a-button type=\"primary\" size=\"small\">查看</a-button>-->\r\n<!--                        <a-divider type=\"vertical\" v-if=\"record.orderState == '已预订'\"></a-divider>-->\r\n                        <a-popconfirm\r\n                                title=\"你确定撤销该笔订单吗？\"\r\n                                @confirm=\"confirmCancelOrder(record.id)\"\r\n                                @cancel=\"cancelCancelOrder\"\r\n                                okText=\"确定\"\r\n                                cancelText=\"取消\"\r\n                                v-if=\"record.orderState == '已预订'\"\r\n                        >\r\n                            <a-button type=\"danger\" size=\"small\">撤销</a-button>\r\n                        </a-popconfirm>\r\n<!--                        <a-divider type=\"vertical\" v-if=\"record.orderState == '已入住'\"></a-divider>-->\r\n                       <a-popconfirm\r\n                               title=\"你确定删除该笔订单的历史记录吗？\"\r\n                               @confirm=\"confirmCancelOrder(record.id)\"\r\n                               @cancel=\"cancelCancelOrder\"\r\n                               okText=\"确定\"\r\n                               cancelText=\"取消\"\r\n                               v-if=\"record.orderState === '已入住'\"\r\n                       >\r\n                            <a-button type=\"danger\" size=\"small\" v-if=\"record.orderState === '已入住'\">删除</a-button>\r\n                        </a-popconfirm>\r\n                        <a-divider type=\"vertical\" v-if=\"record.orderState === '已入住'\"></a-divider>\r\n                        <a-button type=\"primary\" size=\"small\" v-if=\"record.orderState==='已入住'\" @click=\"addcomment(record)\"><a-icon type=\"plus\" />评价</a-button>\r\n\r\n                    </span>\r\n                </a-table>\r\n            </a-tab-pane>\r\n            <a-tab-pane tab=\"会员中心\" key=\"3\" v-if=\"userInfo.userType==='Client'\">\r\n                <div class=\"vip-info\" v-if=\"userInfo.isVIP>0\">\r\n                    <a-row>\r\n                        <a-col :span=\"1\">\r\n                        </a-col>\r\n                        <a-col :span=\"9\">\r\n                    <div class=\"info\" >\r\n                        <a-form :form=\"form\" style=\"margin-top: 30px\">\r\n                            <a-form-item label=\"会员等级\" :label-col=\"{ span: 3 }\" :wrapper-col=\"{ span: 8, offset: 1  }\">\r\n                                <a-rate style=\"font-size: 15px\" :value=\"userInfo.isVIP\" disabled/>\r\n                                <a-tag color=\"#2db7f5\">\r\n                                    level{{ userInfo.isVIP }}\r\n                                </a-tag>\r\n                            </a-form-item>\r\n\r\n                            <a-form-item v-if=\"userInfo.corporationName.length>0\" label=\"合作企业\" :label-col=\"{ span: 3 }\" :wrapper-col=\"{ span: 8, offset: 1 }\">\r\n                                <a-tag  color=\"orange\">\r\n                                    {{ userInfo.corporationName }}\r\n                                </a-tag>\r\n                            </a-form-item>\r\n                            <a-form-item v-else :wrapper-col=\"{ span: 8, offset: 1  }\">\r\n                                <a-button type=\"primary\" @click=\"improveVip\">\r\n                                    <a-icon type=\"rise\" />\r\n                                    升级为企业会员\r\n                                </a-button>\r\n                            </a-form-item>\r\n\r\n                        </a-form>\r\n                    </div>\r\n                        </a-col>\r\n                        <a-col :span=\"12\">\r\n                    <a-card style=\"width: 700px;\">\r\n                        <img\r\n                                v-if=\"userInfo.corporationName.length>0\"\r\n                                alt=\"example\"\r\n                                src=\"https://obsidian-test.oss-cn-beijing.aliyuncs.com/QQ20200703-0.png\"\r\n                                slot=\"cover\"\r\n                                referrerPolicy=\"no-referrer\"\r\n                        />\r\n                        <img\r\n                                v-else\r\n                                alt=\"example\"\r\n                                src=\"https://obsidian-test.oss-cn-beijing.aliyuncs.com/QQ20200703-1.png\"\r\n                                slot=\"cover\"\r\n                                referrerPolicy=\"no-referrer\"\r\n                        />\r\n                    </a-card>\r\n                        </a-col>\r\n                    </a-row>\r\n                </div>\r\n\r\n                <div class=\"register\" v-else>\r\n                    <a-button type=\"primary\" style=\"margin-left: 30px\" @click=\"beVip\">\r\n                        注册会员\r\n                    </a-button>\r\n                </div>\r\n            </a-tab-pane>\r\n        </a-tabs>\r\n        <AddCommentModal></AddCommentModal>\r\n    </div>\r\n</template>\r\n<script>\r\n    import {getUserInfoAPI} from \"../../api/user\";\r\n    const moment = require('moment')\r\n    const colorList = ['#f56a00', '#7265e6', '#ffbf00', '#00a2ae'];\r\n    import { mapGetters, mapMutations, mapActions } from 'vuex'\r\n    import AddCommentModal from './components/addComment'\r\n    const columns = [\r\n        {\r\n            title: '订单号',\r\n            dataIndex: 'id',\r\n        },\r\n        {\r\n            title: '酒店名',\r\n            dataIndex: 'hotelName',\r\n        },\r\n        {\r\n            title: '房型',\r\n            dataIndex: 'roomType',\r\n            scopedSlots: { customRender: 'roomType' }\r\n        },\r\n        {\r\n            title: '入住时间',\r\n            dataIndex: 'checkInDate',\r\n            scopedSlots: { customRender: 'checkInDate' }\r\n        },\r\n        {\r\n            title: '离店时间',\r\n            dataIndex: 'checkOutDate',\r\n            scopedSlots: { customRender: 'checkOutDate' }\r\n        },\r\n        {\r\n            title: '入住人数',\r\n            dataIndex: 'peopleNum',\r\n        },\r\n        {\r\n            title: '房价',\r\n            dataIndex: 'price',\r\n        },\r\n        {\r\n            title: '状态',\r\n            filters: [{ text: '已预订', value: '已预订' }, { text: '已撤销', value: '已撤销' }, { text: '已入住', value: '已入住' }],\r\n            onFilter: (value, record) => record.orderState.includes(value),\r\n            dataIndex: 'orderState',\r\n            scopedSlots: { customRender: 'orderState' }\r\n        },\r\n        {\r\n            title: '操作',\r\n            key: 'action',\r\n            scopedSlots: { customRender: 'action' },\r\n        },\r\n\r\n    ];\r\n    export default {\r\n        name: 'info',\r\n        data(){\r\n            return {\r\n                avatarValue:\"1\",\r\n                color: colorList[0],\r\n                modify: false,\r\n                formLayout: 'horizontal',\r\n                pagination: {},\r\n                columns,\r\n                data: [],\r\n                form: this.$form.createForm(this, { name: 'coordinated' }),\r\n            }\r\n        },\r\n        components: {\r\n            AddCommentModal,\r\n\r\n        },\r\n        computed: {\r\n            ...mapGetters([\r\n                'userId',\r\n                'userInfo',\r\n                'userOrderList',\r\n                'addCommentVisible',\r\n                'activeOrderId',\r\n            ])\r\n        },\r\n        async mounted() {\r\n            console.log(this.userInfo)\r\n            await this.getUserInfo()\r\n            await this.getUserOrders()\r\n            this.avatarValue=this.userInfo.userName\r\n        },\r\n        methods: {\r\n            moment,\r\n            changeValue() {\r\n                const index = colorList.indexOf(this.color);\r\n                this.color = index < colorList.length - 1 ? colorList[index + 1] : colorList[0];\r\n            },\r\n            ...mapMutations([\r\n                'set_addCommentVisible',\r\n                'set_activeOrderId',\r\n                'set_commentParams',\r\n                'set_enrollVIPVisible'\r\n            ]),\r\n            ...mapActions([\r\n                'getUserInfo',\r\n                'getUserOrders',\r\n                'updateUserInfo',\r\n                'cancelOrder'\r\n            ]),\r\n            saveModify() {\r\n                this.form.validateFields((err, values) => {\r\n                    if (!err) {\r\n                        const data = {\r\n                            userName: this.form.getFieldValue('userName'),\r\n                            phoneNumber: this.form.getFieldValue('phoneNumber'),\r\n                            password: this.form.getFieldValue('password'),\r\n                            avatarValue:this.form.getFieldValue('userName'),\r\n                            birthday: this.form.getFieldValue('date').format('YYYY-MM-DD'),\r\n                        }\r\n                        this.avatarValue=data.userName\r\n                        this.updateUserInfo(data).then(()=>{\r\n                            this.modify = false\r\n                        })\r\n                    }\r\n                });\r\n            },\r\n            modifyInfo() {\r\n                setTimeout(() => {\r\n                    this.form.setFieldsValue({\r\n                        'userName': this.userInfo.userName,\r\n                        'phoneNumber': this.userInfo.phoneNumber,\r\n                        'birthday':this.userInfo.birthday,\r\n                    })\r\n                }, 0)\r\n                this.modify = true\r\n            },\r\n            cancelModify() {\r\n                this.modify = false\r\n            },\r\n            confirmCancelOrder(orderId){\r\n                this.cancelOrder(orderId)\r\n            },\r\n            cancelCancelOrder() {\r\n\r\n            },\r\n            beVip(){\r\n                this.set_enrollVIPVisible(true)\r\n            },\r\n            improveVip(){\r\n                this.set_enrollVIPVisible(true)\r\n            },\r\n            addcomment(record){\r\n                this.set_activeOrderId(record.id);\r\n\r\n                this.set_commentParams({\r\n                    userId:this.userId,\r\n                    userName:this.userInfo.userName,\r\n                    credit:this.userInfo.credit,\r\n                    orderId:record.id,\r\n                    hotelId:record.hotelId,\r\n                    color:colorList[Math.floor(Math.random()*colorList.length)]\r\n                })\r\n                this.set_addCommentVisible(true);\r\n            }\r\n\r\n        }\r\n    }\r\n</script>\r\n<style scoped lang=\"less\">\r\n    .info-wrapper {\r\n        padding: 50px;\r\n        .chart {\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: space-between;\r\n            margin-top: 20px\r\n        }\r\n    }\r\n</style>\r\n<style lang=\"less\">\r\n    .info-wrapper {\r\n        .ant-tabs-bar {\r\n            padding-left: 30px\r\n        }\r\n    }\r\n</style>\r\n<style lang=\"less\">\r\n\r\n</style>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- front_end/src/views/user/info.vue	(revision 0e9eb61fd138eea7630fcfcb03912e091949643c)
+++ front_end/src/views/user/info.vue	(date 1593764871167)
@@ -184,6 +184,15 @@
                     </a-button>
                 </div>
             </a-tab-pane>
+            <a-tab-pane tab="历史酒店" key="4" v-if="userInfo.userType=='Client'">
+                <a-table
+                        :columns="columns1"
+                        :dataSource="userOrderList"
+                        bordered
+                >
+
+                </a-table>
+            </a-tab-pane>
         </a-tabs>
         <AddCommentModal></AddCommentModal>
     </div>
@@ -239,6 +248,43 @@
             scopedSlots: { customRender: 'action' },
         },
 
+    ];
+    const columns1 = [
+        {
+            title: '酒店名',
+            dataIndex: 'hotelName',
+        },
+        {
+            title: '房型',
+            dataIndex: 'roomType',
+            scopedSlots: { customRender: 'roomType' }
+        },
+        {
+            title: '入住时间',
+            dataIndex: 'checkInDate',
+            scopedSlots: { customRender: 'checkInDate' }
+        },
+        {
+            title: '离店时间',
+            dataIndex: 'checkOutDate',
+            scopedSlots: { customRender: 'checkOutDate' }
+        },
+        {
+            title: '入住人数',
+            dataIndex: 'peopleNum',
+        },
+        {
+            title: '房价',
+            dataIndex: 'price',
+        },
+        {
+            title: '状态',
+            filters: [{ text: '已预订', value: '已预订' }, { text: '已撤销', value: '已撤销' }, { text: '已入住', value: '已入住' }],
+            dataIndex: 'orderState',
+            scopedSlots: { customRender: 'orderState' }
+        },
+
+
     ];
     export default {
         name: 'info',
@@ -250,6 +296,7 @@
                 formLayout: 'horizontal',
                 pagination: {},
                 columns,
+                columns1,
                 data: [],
                 form: this.$form.createForm(this, { name: 'coordinated' }),
             }
Index: front_end/src/App.vue
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><template>\r\n  <div id=\"app\" v-title data-title=\"vacationLight 酒店管理系统\">\r\n    <transition name=\"fade-transform\" mode=\"out-in\">\r\n      <router-view/>\r\n    </transition>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  components: {\r\n    \r\n  }\r\n}\r\n</script>\r\n<style>\r\n#app {\r\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  color: #2c3e50;\r\n  width: 100%;\r\n  padding: 20px 100px 144px;\r\n  background: #f0f2f5 url('assets/background.svg') repeat 100%;\r\n  min-height: 800px\r\n}\r\n\r\n#nav {\r\n  padding: 30px;\r\n}\r\n\r\n#nav a {\r\n  font-weight: bold;\r\n  color: #2c3e50;\r\n}\r\n\r\n#nav a.router-link-exact-active {\r\n  color: #42b983;\r\n}\r\n\r\n/* fade-transform */\r\n.fade-transform-leave-active,\r\n.fade-transform-enter-active {\r\n  transition: all .5s;\r\n}\r\n\r\n.fade-transform-enter {\r\n  opacity: 0;\r\n  transform: translateX(-30px);\r\n}\r\n\r\n.fade-transform-leave-to {\r\n  opacity: 0;\r\n  transform: translateX(30px);\r\n}\r\n</style>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- front_end/src/App.vue	(revision 0e9eb61fd138eea7630fcfcb03912e091949643c)
+++ front_end/src/App.vue	(date 1593764677604)
@@ -20,8 +20,12 @@
   color: #2c3e50;
   width: 100%;
   padding: 20px 100px 144px;
-  background: #f0f2f5 url('assets/background.svg') repeat 100%;
-  min-height: 800px
+  background: url('assets/background.svg') fixed;
+  background-repeat: repeat-y;
+  background-size:100% 100%;
+  -moz-background-size:100% 100%;
+  min-height: 200%;
+  max-width: 2000px;
 }
 
 #nav {
Index: front_end/src/views/hotelManager/manageHotel.vue
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><template>\r\n    <div class=\"manageHotel-wrapper\">\r\n        <a-tabs>\r\n\r\n            <a-tab-pane tab=\"优惠策略\" key=\"1\">\r\n                <div style=\"width: 100%; text-align: right; margin:20px 0\">\r\n                    <a-button type=\"primary\" @click=\"addCoupon\"><a-icon type=\"plus\" />添加优惠策略</a-button>\r\n                </div>\r\n                <a-table\r\n                        :columns=\"columns1\"\r\n                        :dataSource=\"data\"\r\n                        bordered\r\n                >\r\n                    <template\r\n                            v-for=\"col in ['couponName', 'couponType', 'description','targetMoney','discount','discountMoney','startTime','endTime']\"\r\n                            :slot=\"col\"\r\n                            slot-scope=\"text, record\"\r\n                    >\r\n                        <div :key=\"col\">\r\n                            <a-input\r\n                                    v-if=\"record.editable\"\r\n                                    style=\"margin: -5px 0\"\r\n                                    :value=\"text\"\r\n                                    @change=\"e => handleChange(e.target.value, record.key, col)\"\r\n                            />\r\n                            <template v-else>\r\n                                {{ text }}\r\n                            </template>\r\n                        </div>\r\n                    </template>\r\n                    <template slot=\"action..\" slot-scope=\"text, record\">\r\n                        <div class=\"editable-row-operations\">\r\n        <span v-if=\"record.editable\">\r\n          <a @click=\"() => save(record.key)\">Save</a>\r\n            <a-divider type=\"vertical\"></a-divider>\r\n          <a-popconfirm title=\"Sure to cancel?\" @confirm=\"() => cancel(record.key)\">\r\n            <a>Cancel</a>\r\n          </a-popconfirm>\r\n        </span>\r\n                            <span v-else>\r\n          <a :disabled=\"editingKey !== ''\" @click=\"() => edit(record.key)\">Edit</a>\r\n        </span>\r\n\r\n                        </div>\r\n                    </template>\r\n\r\n\r\n                </a-table>\r\n            </a-tab-pane>\r\n\r\n\r\n            <a-tab-pane tab=\"订单管理\" key=\"2\">\r\n                <a-table\r\n                        :columns=\"columns2\"\r\n                        :dataSource=\"orderList\"\r\n                        bordered\r\n                >\r\n                    <span slot=\"price\" slot-scope=\"text\">\r\n                        <span>￥{{ text }}</span>\r\n                    </span>\r\n                    <span slot=\"roomType\" slot-scope=\"text\">\r\n                        <span v-if=\"text == 'BigBed'\">大床房</span>\r\n                        <span v-if=\"text == 'DoubleBed'\">双床房</span>\r\n                        <span v-if=\"text == 'Family'\">家庭房</span>\r\n                    </span>\r\n                    <span slot=\"action\" slot-scope=\"record\">\r\n\r\n                        <a-button type=\"primary\" size=\"small\" @click=\"confirmOrders(record)\" v-if=\"record.orderState=='已预订'\">确认入住</a-button>\r\n                        <a-divider type=\"vertical\" v-if=\"record.orderState=='已预订'\"></a-divider>\r\n                        <a-popconfirm\r\n                                title=\"确定想删除该订单吗？\"\r\n                                @confirm=\"deleteOrder(record)\"\r\n                                okText=\"确定\"\r\n                                cancelText=\"取消\"\r\n                        >\r\n                            <a-button type=\"danger\" size=\"small\">删除订单</a-button>\r\n                        </a-popconfirm>\r\n                         <a-divider type=\"vertical\"></a-divider>\r\n                        <a-button type=\"primary\" size=\"small\" @click=\"changeOrder(record)\">修改订单</a-button>\r\n                    </span>\r\n                </a-table>\r\n            </a-tab-pane>\r\n\r\n        </a-tabs>\r\n        <Coupon></Coupon>\r\n        <AddCoupon></AddCoupon>\r\n        <up-date-order-modal></up-date-order-modal>\r\n    </div>\r\n</template>\r\n<script>\r\n    import { mapGetters, mapMutations, mapActions } from 'vuex'\r\n    import Coupon from './components/coupon'\r\n    import AddCoupon from './components/addCoupon';\r\n    import UpDateOrderModal from \"./components/updateOrderModal\";\r\n    const moment = require('moment')\r\n    const columns1 = [\r\n        {\r\n            title: '优惠券名',\r\n            dataIndex: 'couponName',\r\n            width: 150,\r\n            scopedSlots: { customRender: 'couponName' },\r\n        },\r\n        {\r\n            title: '优惠券类型',\r\n            dataIndex: 'couponType',\r\n            width: 150,\r\n            scopedSlots: { customRender: 'couponType' },\r\n        },\r\n        {\r\n            title: '优惠简介',\r\n            dataIndex: 'description',\r\n            width: 150,\r\n            scopedSlots: { customRender: 'description' },\r\n        },\r\n        {\r\n            title: '达标金额',\r\n            dataIndex: 'targetMoney',\r\n            width: 100,\r\n            scopedSlots: { customRender: 'targetMoney' },\r\n        },\r\n        {\r\n            title: '折扣',\r\n            dataIndex: 'discount',\r\n            width: 100,\r\n            scopedSlots: { customRender: 'discount' },\r\n        },\r\n        {\r\n            title: '优惠金额',\r\n            dataIndex: 'discountMoney',\r\n            width: 100,\r\n            scopedSlots: { customRender: 'discountMoney' },\r\n        },\r\n        {\r\n            title: '开始日期',\r\n            dataIndex: 'startTime',\r\n            width: 150,\r\n            scopedSlots: { customRender: 'startTime' },\r\n        },\r\n        {\r\n            title: '失效日期',\r\n            dataIndex: 'endTime',\r\n            width: 150,\r\n            scopedSlots: { customRender: 'endTime' },\r\n        },\r\n        {\r\n            title: '操作',\r\n            key: 'action',\r\n            width: 200,\r\n            scopedSlots: { customRender: 'action..' },\r\n        },\r\n    ];\r\n    const columns2 = [\r\n        {\r\n            title: '订单号',\r\n            dataIndex: 'id',\r\n        },\r\n        {\r\n            title: '酒店名',\r\n            dataIndex: 'hotelName',\r\n        },\r\n        {\r\n            title: '房型',\r\n            dataIndex: 'roomType',\r\n            scopedSlots: { customRender: 'roomType' }\r\n        },\r\n        {\r\n            title: '入住时间',\r\n            dataIndex: 'checkInDate',\r\n            scopedSlots: { customRender: 'checkInDate' }\r\n        },\r\n        {\r\n            title: '离店时间',\r\n            dataIndex: 'checkOutDate',\r\n            scopedSlots: { customRender: 'checkOutDate' }\r\n        },\r\n        {\r\n            title: '入住人数',\r\n            dataIndex: 'peopleNum',\r\n        },\r\n        {\r\n            title: '房价',\r\n            dataIndex: 'price',\r\n        },\r\n        {\r\n            title: '状态',\r\n            filters: [{ text: '已预订', value: '已预订' }, { text: '已撤销', value: '已撤销' }, { text: '已入住', value: '已入住' }],\r\n            onFilter: (value, record) => record.orderState.includes(value),\r\n            dataIndex: 'orderState',\r\n            scopedSlots: { customRender: 'orderState' }\r\n        },\r\n        {\r\n            title: '操作',\r\n            key: 'action',\r\n            scopedSlots: { customRender: 'action' },\r\n        },\r\n    ];\r\n    const data = [];\r\n    export default {\r\n        name: 'manageHotel',\r\n        data(){\r\n            this.cacheData = data.map(item => ({ ...item }));\r\n            return {\r\n                data,\r\n                formLayout: 'horizontal',\r\n                pagination: {},\r\n                columns1,\r\n                columns2,\r\n                editingKey: '',\r\n                form: this.$form.createForm(this, { name: 'manageHotel' }),\r\n            }\r\n        },\r\n        components: {\r\n            UpDateOrderModal,\r\n            AddCoupon,\r\n            Coupon,\r\n        },\r\n        computed: {\r\n            ...mapGetters([\r\n                'orderList',\r\n                'hotelList',\r\n                'addHotelModalVisible',\r\n                'addRoomModalVisible',\r\n                'activeHotelId',\r\n                'couponVisible',\r\n                'updateOrderModalVisible',\r\n                'manageId',\r\n                'userInfo',\r\n                'couponList',\r\n            ]),\r\n        },\r\n        async mounted() {\r\n             await this.getHotelOrders(this.manageId)\r\n            await this.getHotelCoupon(this.manageId)\r\n            for (let i = 0; i < this.couponList.length; i++) {\r\n            data.push({\r\n                //couponName', 'couponType', 'description','targetMoney','discount','discountMoney','startTime','endTime\r\n                key: i.toString(),\r\n                id:this.couponList[i].id,\r\n                hotelId:this.couponList[i].hotelId,\r\n                couponName: this.couponList[i].couponName,\r\n                couponType: this.couponList[i].couponType,\r\n                description: this.couponList[i].description,\r\n                targetMoney: this.couponList[i].targetMoney,\r\n                discount: this.couponList[i].discount,\r\n                discountMoney: this.couponList[i].discountMoney,\r\n                startTime: this.couponList[i].startTime,\r\n                endTime: this.couponList[i].endTime,\r\n            });\r\n                this.cacheData.push({\r\n                    //couponName', 'couponType', 'description','targetMoney','discount','discountMoney','startTime','endTime\r\n                    key: i.toString(),\r\n                    id:this.couponList[i].id,\r\n                    hotelId:this.couponList[i].hotelId,\r\n                    couponName: this.couponList[i].couponName,\r\n                    couponType: this.couponList[i].couponType,\r\n                    description: this.couponList[i].description,\r\n                    targetMoney: this.couponList[i].targetMoney,\r\n                    discount: this.couponList[i].discount,\r\n                    discountMoney: this.couponList[i].discountMoney,\r\n                    startTime: this.couponList[i].startTime,\r\n                    endTime: this.couponList[i].endTime,\r\n                });\r\n\r\n\r\n            }\r\n\r\n\r\n        },\r\n        methods: {\r\n            ...mapMutations([\r\n                'set_addHotelModalVisible',\r\n                'set_couponVisible',\r\n                'set_activeHotelId',\r\n                'set_updateOrdersParams',\r\n                'set_updateOrderModalVisible',\r\n                'set_addCouponVisible',\r\n                'set_currentOrderId'\r\n            ]),\r\n            ...mapActions([\r\n                'getHotelList',\r\n                'getAllOrders',\r\n                'getHotelCoupon',\r\n                'getHotelOrders',\r\n                'updateOrders',\r\n                'updateCoupon'\r\n            ]),\r\n            addRoom(record) {\r\n                this.set_activeHotelId(record.id)\r\n                this.set_addRoomModalVisible(true)\r\n            },\r\n            addCoupon() {\r\n                console.log(this.manageId)\r\n                this.set_activeHotelId(this.manageId)\r\n                this.set_addCouponVisible(true)\r\n            },\r\n            handleChange(value, key, column) {\r\n                const newData = [...this.data];\r\n                const target = newData.filter(item => key === item.key)[0];\r\n                if (target) {\r\n                    target[column] = value;\r\n                    this.data = newData;\r\n                }\r\n            },\r\n            edit(key) {\r\n                const newData = [...this.data];\r\n                const target = newData.filter(item => key === item.key)[0];\r\n                this.editingKey = key;\r\n                if (target) {\r\n                    target.editable = true;\r\n                    this.data = newData;\r\n                }\r\n            },\r\n            save(key) {\r\n                const newData = [...this.data];\r\n                const newCacheData = [...this.cacheData];\r\n                const target = newData.filter(item => key === item.key)[0];\r\n                const targetCache = newCacheData.filter(item => key === item.key)[0];\r\n                if (target && targetCache) {\r\n                    console.log(\"!!!\",target)\r\n                    this.changeCoupon(target)\r\n                    delete target.editable;\r\n                    this.data = newData;\r\n                    Object.assign(targetCache, target);\r\n                    this.cacheData = newCacheData;\r\n                }\r\n                this.editingKey = '';\r\n            },\r\n            cancel(key) {\r\n                const newData = [...this.data];\r\n                const target = newData.filter(item => key === item.key)[0];\r\n                this.editingKey = '';\r\n                if (target) {\r\n                    Object.assign(target, this.cacheData.filter(item => key === item.key)[0]);\r\n                    delete target.editable;\r\n                    this.data = newData;\r\n                }\r\n            },\r\n\r\n\r\n\r\n\r\n\r\n            changeCoupon(record) {\r\n                this.updateCoupon(record)\r\n            },\r\n            deleteCoupon(record){\r\n\r\n            },\r\n            changeOrder(record){\r\n                console.log(record)\r\n                const data={\r\n                    hotelId: record.hotelId,\r\n                    hotelName: record.hotelName,\r\n                    userId: record.userId,\r\n                    createDate: record.createDate,\r\n                    id:record.id,\r\n                    phoneNumber:record.phoneNumber\r\n                }\r\n\r\n                this.set_updateOrdersParams(data);\r\n                this.set_currentOrderId(record.id);\r\n                this.set_updateOrderModalVisible(true);\r\n                alert(this.updateOrderModalVisible)\r\n\r\n\r\n            },\r\n            deleteOrder(record){\r\n               const value={record:record,type:'delete'}\r\n                this.updateOrders(value);\r\n\r\n            },\r\n            confirmOrders(record){\r\n                const value={record:record,type:'confirm'}\r\n                this.updateOrders(value);\r\n\r\n            },\r\n        }\r\n    }\r\n</script>\r\n<style scoped lang=\"less\">\r\n    .manageHotel-wrapper {\r\n        padding: 50px;\r\n        .chart {\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: space-between;\r\n            margin-top: 20px\r\n        }\r\n    }\r\n</style>\r\n<style lang=\"less\">\r\n    .manageHotel-wrapper {\r\n        .ant-tabs-bar {\r\n            padding-left: 30px\r\n        }\r\n    }\r\n</style>\r\n<style lang=\"less\">\r\n\r\n</style>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- front_end/src/views/hotelManager/manageHotel.vue	(revision 0e9eb61fd138eea7630fcfcb03912e091949643c)
+++ front_end/src/views/hotelManager/manageHotel.vue	(date 1593763300275)
@@ -229,6 +229,7 @@
             ]),
         },
         async mounted() {
+            data.splice(0,data.length)//清空
              await this.getHotelOrders(this.manageId)
             await this.getHotelCoupon(this.manageId)
             for (let i = 0; i < this.couponList.length; i++) {
@@ -360,7 +361,6 @@
                 this.set_updateOrdersParams(data);
                 this.set_currentOrderId(record.id);
                 this.set_updateOrderModalVisible(true);
-                alert(this.updateOrderModalVisible)
 
 
             },
Index: src/main/resources/application.yml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>spring:\r\n  datasource:\r\n     url: jdbc:mysql://localhost:3306/Hotel?serverTimezone=CTT&characterEncoding=UTF-8\r\n     username: NaCN\r\n     password: Nasiyu0627\r\n     driver-class-name: com.mysql.cj.jdbc.Driver\r\n     max-active: 200\r\n     max-idle: 20\r\n     min-idle: 10\r\n  thymeleaf:\r\n     cache: false\r\n  jackson:\r\n    time-zone: GMT+8\r\n\r\nmybatis:\r\n  mapper-locations: classpath:dataImpl/*/*Mapper.xml\r\n\r\n 
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/resources/application.yml	(revision 0e9eb61fd138eea7630fcfcb03912e091949643c)
+++ src/main/resources/application.yml	(date 1593748890678)
@@ -1,8 +1,8 @@
 spring:
   datasource:
      url: jdbc:mysql://localhost:3306/Hotel?serverTimezone=CTT&characterEncoding=UTF-8
-     username: NaCN
-     password: Nasiyu0627
+     username: root
+     password: 54superME
      driver-class-name: com.mysql.cj.jdbc.Driver
      max-active: 200
      max-idle: 20
