Index: src/main/resources/application.yml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>spring:\r\n  datasource:\r\n     url: jdbc:mysql://localhost:3306/Hotel?serverTimezone=CTT&characterEncoding=UTF-8\r\n     username: root\r\n     password: 2378kobe\r\n     driver-class-name: com.mysql.cj.jdbc.Driver\r\n     max-active: 200\r\n     max-idle: 20\r\n     min-idle: 10\r\n  thymeleaf:\r\n     cache: false\r\n  jackson:\r\n    time-zone: GMT+8\r\n\r\nmybatis:\r\n  mapper-locations: classpath:dataImpl/*/*Mapper.xml\r\n\r\n 
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/resources/application.yml	(revision 7562581bd420a0eb9727109057dd32fa52d88989)
+++ src/main/resources/application.yml	(date 1593704899169)
@@ -2,7 +2,7 @@
   datasource:
      url: jdbc:mysql://localhost:3306/Hotel?serverTimezone=CTT&characterEncoding=UTF-8
      username: root
-     password: 2378kobe
+     password: 54superME
      driver-class-name: com.mysql.cj.jdbc.Driver
      max-active: 200
      max-idle: 20
Index: front_end/src/views/saler/components/infoCard.vue
===================================================================
--- front_end/src/views/saler/components/infoCard.vue	(revision 7562581bd420a0eb9727109057dd32fa52d88989)
+++ front_end/src/views/saler/components/infoCard.vue	(revision 7562581bd420a0eb9727109057dd32fa52d88989)
@@ -1,50 +0,0 @@
-<template>
-    <a-card hoverable style="width: 300px">
-        <img
-                slot="cover"
-                alt="example"
-                src="https://gw.alipayobjects.com/zos/rmsportal/JiqGstEfoWAOHiTxclqi.png"
-        />
-        <template slot="actions" class="ant-card-actions">
-            <a-icon key="setting" type="setting" />
-            <a-icon key="edit" type="edit" />
-            <a-icon key="ellipsis" type="ellipsis" />
-        </template>
-        <a-card-meta :title="hotel.title">
-        </a-card-meta>
-    </a-card>
-</template>
-
-<script>
-    export default {
-        name: "infoCard",
-        props: {
-            hotel: {}
-        },
-        data() {
-            return{
-            }
-        },
-    }
-
-</script>
-
-<style scoped lang="less">
-    .infoCard{
-        margin: 10px 10px;
-        min-width: 180px;
-        max-height: 350px;
-        img {
-            height: 250px;
-        }
-    }
-    .infoCard{
-        .ant-card-body{
-            padding: 12px
-        }
-    }
-
-    .ant-card-hoverable:hover {
-        box-shadow: 0 2px 8px rgba(0,0,0,0.4)
-    }
-</style>
\ No newline at end of file
Index: front_end/src/views/user/info.vue
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><template>\r\n    <div class=\"info-wrapper\">\r\n        <a-tabs>\r\n            <a-tab-pane tab=\"我的信息\" key=\"1\">\r\n                <a-form :form=\"form\" style=\"margin-top: 30px\">\r\n                    <a-form-item label=\"头像\" :label-col=\"{ span: 3 }\" :wrapper-col=\"{ span: 8, offset: 1 }\">\r\n                        <a-avatar\r\n                                shape=\"square\"\r\n                                size=\"large\"\r\n                                :style=\"{ backgroundColor: color, verticalAlign: 'middle' }\"\r\n                        >\r\n                            {{ avatarValue }}\r\n                        </a-avatar>\r\n                        <a-divider type=\"vertical\" ></a-divider>\r\n                        <a-button\r\n                                size=\"small\"\r\n                                :style=\"{ marginLeft: 16, verticalAlign: 'middle' }\"\r\n                                @click=\"changeValue\"\r\n                                v-if=\"modify\"\r\n                        >\r\n                            改变\r\n                        </a-button>\r\n                    </a-form-item>\r\n                    <a-form-item label=\"用户名\" :label-col=\"{ span: 3 }\" :wrapper-col=\"{ span: 8, offset: 1  }\">\r\n                        <a-input\r\n                                placeholder=\"请填写用户名\"\r\n                                v-decorator=\"['userName', { rules: [{ required: true, message: '请输入用户名' }] }]\"\r\n                                v-if=\"modify\"\r\n                        />\r\n                        <span v-else>{{ userInfo.userName }}</span>\r\n                    </a-form-item>\r\n                    <a-form-item label=\"邮箱\" :label-col=\"{ span: 3 }\" :wrapper-col=\"{ span: 8, offset: 1 }\">\r\n                        <span>{{ userInfo.email }}</span>\r\n                    </a-form-item>\r\n\r\n                    <a-form-item label=\"出生日期\" :label-col=\"{ span: 3 }\" :wrapper-col=\"{ span: 8, offset: 1 }\">\r\n                        <a-date-picker\r\n                                v-if=\"modify\"\r\n                                format=\"YYYY-MM-DD\"\r\n                                v-decorator=\"[\r\n                        'date',\r\n                        {\r\n                            rules: [{ required: true, message: '请输入出生日期' }]\r\n                        }\r\n                    ]\"\r\n                                :placeholder=\"'出生日期'\"\r\n                        />\r\n                        <a-date-picker v-else :default-value=\"moment(userInfo.birthday, 'YYYY-MM-DD')\" disabled></a-date-picker>\r\n                    </a-form-item>\r\n\r\n                    <a-form-item label=\"手机号\" :label-col=\"{ span: 3 }\" :wrapper-col=\"{ span: 8, offset: 1 }\">\r\n                        <a-input\r\n                                placeholder=\"请填写手机号\"\r\n                                v-decorator=\"['phoneNumber', { rules: [{ required: true, message: '请输入手机号' }] }]\"\r\n                                v-if=\"modify\"\r\n                        />\r\n                        <span v-else>{{ userInfo.phoneNumber}}</span>\r\n                    </a-form-item>\r\n                    <a-form-item label=\"信用值\" :label-col=\"{ span: 3 }\" :wrapper-col=\"{ span: 8, offset: 1 }\">\r\n                        <span>{{ userInfo.credit }}</span>\r\n                    </a-form-item>\r\n                    <a-form-item label=\"密码\" :label-col=\"{ span: 3 }\" :wrapper-col=\"{ span: 8, offset: 1 }\" v-if=\"modify\">\r\n                        <a-input\r\n                                placeholder=\"请输入新密码\"\r\n                                v-decorator=\"['password', { rules: [{ required: true, message: '请输入新密码' }] }]\"\r\n                        />\r\n                    </a-form-item>\r\n                    <a-form-item :wrapper-col=\"{ span: 12, offset: 5 }\" v-if=\"modify\">\r\n                        <a-button type=\"primary\" @click=\"saveModify\">\r\n                            保存\r\n                        </a-button>\r\n                        <a-button type=\"default\" style=\"margin-left: 30px\" @click=\"cancelModify\">\r\n                            取消\r\n                        </a-button>\r\n                    </a-form-item>\r\n                    <a-form-item :wrapper-col=\"{ span: 8, offset: 4 }\" v-else>\r\n                        <a-button type=\"primary\" @click=\"modifyInfo\">\r\n                            修改信息\r\n                        </a-button>\r\n                    </a-form-item>\r\n                </a-form>\r\n            </a-tab-pane>\r\n            <a-tab-pane tab=\"我的订单\" key=\"2\" v-if=\"userInfo.userType=='Client'\">\r\n                <a-table\r\n                        :columns=\"columns\"\r\n                        :dataSource=\"userOrderList\"\r\n                        bordered\r\n                >\r\n                    <span slot=\"price\" slot-scope=\"text\">\r\n                        <span>￥{{ text }}</span>\r\n                    </span>\r\n                    <span slot=\"roomType\" slot-scope=\"text\">\r\n                        <span v-if=\"text == 'BigBed'\">大床房</span>\r\n                        <span v-if=\"text == 'DoubleBed'\">双床房</span>\r\n                        <span v-if=\"text == 'Family'\">家庭房</span>\r\n                    </span>\r\n                    <a-tag slot=\"orderState\" color=\"blue\" slot-scope=\"text\">\r\n                        {{ text }}\r\n                    </a-tag>\r\n                    <span slot=\"action\" slot-scope=\"record\">\r\n<!--                        <a-button type=\"primary\" size=\"small\">查看</a-button>-->\r\n<!--                        <a-divider type=\"vertical\" v-if=\"record.orderState == '已预订'\"></a-divider>-->\r\n                        <a-popconfirm\r\n                                title=\"你确定撤销该笔订单吗？\"\r\n                                @confirm=\"confirmCancelOrder(record.id)\"\r\n                                @cancel=\"cancelCancelOrder\"\r\n                                okText=\"确定\"\r\n                                cancelText=\"取消\"\r\n                                v-if=\"record.orderState == '已预订'\"\r\n                        >\r\n                            <a-button type=\"danger\" size=\"small\">撤销</a-button>\r\n                        </a-popconfirm>\r\n<!--                        <a-divider type=\"vertical\" v-if=\"record.orderState == '已入住'\"></a-divider>-->\r\n                       <a-popconfirm\r\n                               title=\"你确定删除该笔订单的历史记录吗？\"\r\n                               @confirm=\"confirmCancelOrder(record.id)\"\r\n                               @cancel=\"cancelCancelOrder\"\r\n                               okText=\"确定\"\r\n                               cancelText=\"取消\"\r\n                               v-if=\"record.orderState === '已入住'\"\r\n                       >\r\n                            <a-button type=\"danger\" size=\"small\" v-if=\"record.orderState === '已入住'\">删除</a-button>\r\n                        </a-popconfirm>\r\n                        <a-divider type=\"vertical\" v-if=\"record.orderState === '已入住'\"></a-divider>\r\n                        <a-button type=\"primary\" size=\"small\" v-if=\"record.orderState==='已入住'\" @click=\"addcomment(record)\"><a-icon type=\"plus\" />评价</a-button>\r\n\r\n                    </span>\r\n                </a-table>\r\n            </a-tab-pane>\r\n            <a-tab-pane tab=\"会员中心\" key=\"3\" v-if=\"userInfo.userType==='Client'\">\r\n                <div class=\"vip-info\">\r\n                    <div class=\"info\">\r\n                        <a-form :form=\"form\" style=\"margin-top: 30px\">\r\n                            <a-form-item label=\"会员等级\" :label-col=\"{ span: 3 }\" :wrapper-col=\"{ span: 8, offset: 1  }\">\r\n                                <a-rate style=\"font-size: 15px\" :value=\"userInfo.isVIP\" disabled/>\r\n                                <a-tag color=\"#2db7f5\">\r\n                                    level{{ userInfo.isVIP }}\r\n                                </a-tag>\r\n                            </a-form-item>\r\n\r\n                            <a-form-item label=\"合作企业\" :label-col=\"{ span: 3 }\" :wrapper-col=\"{ span: 8, offset: 1 }\">\r\n                                <a-tag  color=\"orange\">\r\n                                    {{ userInfo.corporationName }}\r\n                                </a-tag>\r\n                            </a-form-item>\r\n\r\n                        </a-form>\r\n                    </div>\r\n                    <a-divider></a-divider>\r\n                    <a-card style=\"width: 300px;\">\r\n                        <img\r\n                                alt=\"example\"\r\n                                src=\"https://pic2.zhimg.com/v2-5b024964872620cbdeb69b7027e13767_r.jpg\"\r\n                                slot=\"cover\"\r\n                                referrerPolicy=\"no-referrer\"\r\n                        />\r\n                    </a-card>\r\n                </div>\r\n            </a-tab-pane>\r\n        </a-tabs>\r\n        <AddCommentModal></AddCommentModal>\r\n    </div>\r\n</template>\r\n<script>\r\n    import {getUserInfoAPI} from \"../../api/user\";\r\n    const moment = require('moment')\r\n    const colorList = ['#f56a00', '#7265e6', '#ffbf00', '#00a2ae'];\r\n    import { mapGetters, mapMutations, mapActions } from 'vuex'\r\n    import AddCommentModal from './components/addComment'\r\n    const columns = [\r\n        {\r\n            title: '订单号',\r\n            dataIndex: 'id',\r\n        },\r\n        {\r\n            title: '酒店名',\r\n            dataIndex: 'hotelName',\r\n        },\r\n        {\r\n            title: '房型',\r\n            dataIndex: 'roomType',\r\n            scopedSlots: { customRender: 'roomType' }\r\n        },\r\n        {\r\n            title: '入住时间',\r\n            dataIndex: 'checkInDate',\r\n            scopedSlots: { customRender: 'checkInDate' }\r\n        },\r\n        {\r\n            title: '离店时间',\r\n            dataIndex: 'checkOutDate',\r\n            scopedSlots: { customRender: 'checkOutDate' }\r\n        },\r\n        {\r\n            title: '入住人数',\r\n            dataIndex: 'peopleNum',\r\n        },\r\n        {\r\n            title: '房价',\r\n            dataIndex: 'price',\r\n        },\r\n        {\r\n            title: '状态',\r\n            filters: [{ text: '已预订', value: '已预订' }, { text: '已撤销', value: '已撤销' }, { text: '已入住', value: '已入住' }],\r\n            onFilter: (value, record) => record.orderState.includes(value),\r\n            dataIndex: 'orderState',\r\n            scopedSlots: { customRender: 'orderState' }\r\n        },\r\n        {\r\n            title: '操作',\r\n            key: 'action',\r\n            scopedSlots: { customRender: 'action' },\r\n        },\r\n\r\n    ];\r\n    export default {\r\n        name: 'info',\r\n        data(){\r\n            return {\r\n                avatarValue:\"1\",\r\n                color: colorList[0],\r\n                modify: false,\r\n                formLayout: 'horizontal',\r\n                pagination: {},\r\n                columns,\r\n                data: [],\r\n                form: this.$form.createForm(this, { name: 'coordinated' }),\r\n            }\r\n        },\r\n        components: {\r\n            AddCommentModal,\r\n\r\n        },\r\n        computed: {\r\n            ...mapGetters([\r\n                'userId',\r\n                'userInfo',\r\n                'userOrderList',\r\n                'addCommentVisible',\r\n                'activeOrderId',\r\n            ])\r\n        },\r\n        async mounted() {\r\n            await this.getUserInfo()\r\n            await this.getUserOrders()\r\n            this.avatarValue=this.userInfo.userName\r\n        },\r\n        methods: {\r\n            moment,\r\n            changeValue() {\r\n                const index = colorList.indexOf(this.color);\r\n                this.color = index < colorList.length - 1 ? colorList[index + 1] : colorList[0];\r\n            },\r\n            ...mapMutations([\r\n                'set_addCommentVisible',\r\n                'set_activeOrderId',\r\n                'set_commentParams'\r\n            ]),\r\n            ...mapActions([\r\n                'getUserInfo',\r\n                'getUserOrders',\r\n                'updateUserInfo',\r\n                'cancelOrder'\r\n            ]),\r\n            saveModify() {\r\n                this.form.validateFields((err, values) => {\r\n                    if (!err) {\r\n                        const data = {\r\n                            userName: this.form.getFieldValue('userName'),\r\n                            phoneNumber: this.form.getFieldValue('phoneNumber'),\r\n                            password: this.form.getFieldValue('password'),\r\n                            avatarValue:this.form.getFieldValue('userName'),\r\n                            birthday: this.form.getFieldValue('date').format('YYYY-MM-DD'),\r\n                        }\r\n                        this.avatarValue=data.userName\r\n                        this.updateUserInfo(data).then(()=>{\r\n                            this.modify = false\r\n                        })\r\n                    }\r\n                });\r\n            },\r\n            modifyInfo() {\r\n                setTimeout(() => {\r\n                    this.form.setFieldsValue({\r\n                        'userName': this.userInfo.userName,\r\n                        'phoneNumber': this.userInfo.phoneNumber,\r\n                        'birthday':this.userInfo.birthday,\r\n                    })\r\n                }, 0)\r\n                this.modify = true\r\n            },\r\n            cancelModify() {\r\n                this.modify = false\r\n            },\r\n            confirmCancelOrder(orderId){\r\n                this.cancelOrder(orderId)\r\n            },\r\n            cancelCancelOrder() {\r\n\r\n            },\r\n            addcomment(record){\r\n                this.set_activeOrderId(record.id);\r\n\r\n                this.set_commentParams({\r\n                    userId:this.userId,\r\n                    userName:this.userInfo.userName,\r\n                    credit:this.userInfo.credit,\r\n                    orderId:record.id,\r\n                    hotelId:record.hotelId,\r\n                    color:colorList[Math.floor(Math.random()*colorList.length)]\r\n                })\r\n                this.set_addCommentVisible(true);\r\n            }\r\n\r\n        }\r\n    }\r\n</script>\r\n<style scoped lang=\"less\">\r\n    .info-wrapper {\r\n        padding: 50px;\r\n        .chart {\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: space-between;\r\n            margin-top: 20px\r\n        }\r\n    }\r\n</style>\r\n<style lang=\"less\">\r\n    .info-wrapper {\r\n        .ant-tabs-bar {\r\n            padding-left: 30px\r\n        }\r\n    }\r\n</style>\r\n<style lang=\"less\">\r\n\r\n</style>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- front_end/src/views/user/info.vue	(revision 7562581bd420a0eb9727109057dd32fa52d88989)
+++ front_end/src/views/user/info.vue	(date 1593742988183)
@@ -128,8 +128,12 @@
                 </a-table>
             </a-tab-pane>
             <a-tab-pane tab="会员中心" key="3" v-if="userInfo.userType==='Client'">
-                <div class="vip-info">
-                    <div class="info">
+                <div class="vip-info" v-if="userInfo.isVIP>0">
+                    <a-row>
+                        <a-col :span="1">
+                        </a-col>
+                        <a-col :span="9">
+                    <div class="info" >
                         <a-form :form="form" style="margin-top: 30px">
                             <a-form-item label="会员等级" :label-col="{ span: 3 }" :wrapper-col="{ span: 8, offset: 1  }">
                                 <a-rate style="font-size: 15px" :value="userInfo.isVIP" disabled/>
@@ -138,23 +142,46 @@
                                 </a-tag>
                             </a-form-item>
 
-                            <a-form-item label="合作企业" :label-col="{ span: 3 }" :wrapper-col="{ span: 8, offset: 1 }">
+                            <a-form-item v-if="userInfo.corporationName.length>0" label="合作企业" :label-col="{ span: 3 }" :wrapper-col="{ span: 8, offset: 1 }">
                                 <a-tag  color="orange">
                                     {{ userInfo.corporationName }}
                                 </a-tag>
                             </a-form-item>
+                            <a-form-item v-else :wrapper-col="{ span: 8, offset: 1  }">
+                                <a-button type="primary" @click="improveVip">
+                                    <a-icon type="rise" />
+                                    升级为企业会员
+                                </a-button>
+                            </a-form-item>
 
                         </a-form>
                     </div>
-                    <a-divider></a-divider>
-                    <a-card style="width: 300px;">
+                        </a-col>
+                        <a-col :span="12">
+                    <a-card style="width: 700px;">
+                        <img
+                                v-if="userInfo.corporationName.length>0"
+                                alt="example"
+                                src="https://obsidian-test.oss-cn-beijing.aliyuncs.com/QQ20200703-0.png"
+                                slot="cover"
+                                referrerPolicy="no-referrer"
+                        />
                         <img
+                                v-else
                                 alt="example"
-                                src="https://pic2.zhimg.com/v2-5b024964872620cbdeb69b7027e13767_r.jpg"
+                                src="https://obsidian-test.oss-cn-beijing.aliyuncs.com/QQ20200703-1.png"
                                 slot="cover"
                                 referrerPolicy="no-referrer"
                         />
                     </a-card>
+                        </a-col>
+                    </a-row>
+                </div>
+
+                <div class="register" v-else>
+                    <a-button type="primary" style="margin-left: 30px" @click="beVip">
+                        注册会员
+                    </a-button>
                 </div>
             </a-tab-pane>
         </a-tabs>
@@ -241,6 +268,7 @@
             ])
         },
         async mounted() {
+            console.log(this.userInfo)
             await this.getUserInfo()
             await this.getUserOrders()
             this.avatarValue=this.userInfo.userName
@@ -254,7 +282,8 @@
             ...mapMutations([
                 'set_addCommentVisible',
                 'set_activeOrderId',
-                'set_commentParams'
+                'set_commentParams',
+                'set_enrollVIPVisible'
             ]),
             ...mapActions([
                 'getUserInfo',
@@ -297,6 +326,12 @@
             },
             cancelCancelOrder() {
 
+            },
+            beVip(){
+                this.set_enrollVIPVisible(true)
+            },
+            improveVip(){
+                this.set_enrollVIPVisible(true)
             },
             addcomment(record){
                 this.set_activeOrderId(record.id);
Index: front_end/src/store/modules/hotel.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import { message } from 'ant-design-vue'\r\nimport store from '@/store'\r\nimport {\r\n    getHotelsAPI,\r\n    getHotelByIdAPI,\r\n    updateHotelInfoAPI,\r\n    deleteHotelByIdAPI,\r\n    searchHotelAPI,\r\n    getHotelUrlsAPI,\r\n    getHotelUrlByIdAPI,\r\n    updateHotelUrlAPI,\r\n    searchMultipleHotelAPI,\r\n    searchRoomlByDateAPI,\r\n} from '@/api/hotel'\r\nimport {\r\n    addRoomAPI,\r\n    deleteRoomAPI,\r\n    hotelAllRoomsAPI,\r\n    changeRoomAPI,\r\n} from '@/api/hotelManager'\r\nimport {\r\n    reserveHotelAPI\r\n} from '@/api/order'\r\nimport {\r\n    orderMatchCouponsAPI,\r\n} from '@/api/coupon'\r\n\r\nconst hotel = {\r\n    state: {\r\n        hotelList: [],\r\n        hotelUrlList:[],\r\n        roomList:[],\r\n        hotelListParams: {\r\n            pageNo: 0,\r\n            pageSize: 12\r\n        },\r\n        hotelListLoading: true,\r\n        currentHotelId: '',\r\n        currentHotelInfo: {\r\n\r\n        },\r\n        currentHotelUrl:require(\"@/assets/cover.jpeg\"),\r\n        orderModalVisible: false,\r\n        currentOrderRoom: {\r\n\r\n        },\r\n        orderMatchCouponList: [\r\n\r\n        ],\r\n        addRoomParams: {\r\n            roomType: '',\r\n            hotelId: '',\r\n            price: '',\r\n            total: 0,\r\n            curNum: 0,\r\n            peopleNum:0,\r\n            breakfast: '',\r\n        },\r\n        addRoomModalVisible: false,\r\n        roomDate:{}\r\n    },\r\n    mutations: {\r\n        set_roomDate:function(state, data) {\r\n            state.roomDate = data\r\n        },\r\n        set_hotelList: function(state, data) {\r\n            state.hotelList = data\r\n        },\r\n        set_roomList:function(state, data) {\r\n            state.roomList = data\r\n        },\r\n        set_hotelListParams: function(state, data) {\r\n            state.hotelListParams = {\r\n                ...state.hotelListParams,\r\n                ...data,\r\n            }\r\n        },\r\n        set_hotelListLoading: function(state, data) {\r\n            state.hotelListLoading = data\r\n        },\r\n        set_currentHotelId: function(state, data) {\r\n            state.currentHotelId = data\r\n        },\r\n        set_currentHotelInfo: function(state, data) {\r\n            state.currentHotelInfo = {\r\n                ...state.currentHotelInfo,\r\n                ...data,\r\n            }\r\n        },\r\n        set_orderModalVisible: function(state, data) {\r\n            state.orderModalVisible = data\r\n        },\r\n        set_currentOrderRoom: function(state, data) {\r\n            state.currentOrderRoom = {\r\n                ...state.currentOrderRoom,\r\n                ...data,\r\n            }\r\n        },\r\n        set_orderMatchCouponList: function(state, data) {\r\n            state.orderMatchCouponList = data\r\n        },\r\n        set_addRoomModalVisible: function(state, data) {\r\n            state.addRoomModalVisible = data\r\n        },\r\n        set_addRoomParams: function(state, data) {\r\n            console.log(state.addRoomParams);\r\n            state.addRoomParams = {\r\n                ...state.addRoomParams,\r\n                ...data,\r\n            }\r\n        },\r\n        set_currentHotelUrl:function (state,data) {\r\n            state.currentHotelUrl=data\r\n        },\r\n        set_hotelUrlList:function (state,data) {\r\n            state.hotelUrlList=data\r\n        },\r\n\r\n    },\r\n\r\n    actions: {\r\n        getHotelList: async({commit, state}) => {\r\n            const res = await getHotelsAPI()\r\n            if(res){\r\n                commit('set_hotelList', res)\r\n                commit('set_hotelListLoading', false)\r\n                // window.location.reload()\r\n            }\r\n        },\r\n        getHotelUrlList: async({commit, state}) => {\r\n            const res = await getHotelUrlsAPI()\r\n            if(res){\r\n                commit('set_hotelUrlList', res)\r\n                // window.location.reload()\r\n            }\r\n        },\r\n        getHotelById: async({commit, state}) => {\r\n            const res = await getHotelByIdAPI({\r\n                hotelId: state.currentHotelId\r\n            })\r\n            if(res){\r\n                commit('set_currentHotelInfo', res)\r\n            }\r\n        },\r\n        getHotelUrlById: async({commit, state}) => {\r\n            const res = await getHotelUrlByIdAPI({\r\n                hotelId: state.currentHotelId\r\n            })\r\n            console.log('res',res)\r\n            if(res){\r\n                commit('set_currentHotelUrl', res.url)\r\n            }\r\n            else {\r\n                commit('set_currentHotelUrl', require(\"@/assets/cover.jpeg\"))\r\n            }\r\n        },\r\n\r\n        searchRoomlByDate:async({commit, state},dates) => {\r\n\r\n            commit('set_roomDate',dates)\r\n            const res = await searchRoomlByDateAPI({\r\n               ...dates,\r\n                hotelId: state.currentHotelId\r\n            })\r\n            console.log('res',res)\r\n            if(res){\r\n                commit('set_roomList', res)\r\n            }\r\n\r\n        },\r\n        getHotelRoom: async({ state, commit },hotelid) => {\r\n            console.log(hotelid)\r\n            const res = await hotelAllRoomsAPI(hotelid)\r\n            console.log(res)\r\n            if(res) {\r\n                // 获取到酒店策略之后的操作（将获取到的数组赋值给couponList）\r\n                commit('set_roomList',res)\r\n            }\r\n        },\r\n        searchHotel:async({state,commit},key)=>{\r\n            const res = await searchHotelAPI(key)\r\n            console.log(res)\r\n            if(res){\r\n\r\n               commit('set_hotelList',res)\r\n                message.success('search成功')\r\n            }\r\n            else {\r\n                message.error('无匹配')\r\n            }\r\n        },\r\n        updateUrl:async({ state, dispatch }, data) => {\r\n            console.log(data)\r\n            const params = {\r\n                ...data,\r\n                id:state.currentHotelId,\r\n            }\r\n            const res = await updateHotelUrlAPI(params)\r\n            if(res){\r\n                message.success('修改成功')\r\n                dispatch('getHotelUrlById')\r\n            }\r\n        },\r\n        updateHotelInfo: async({ state, dispatch }, data) => {\r\n            console.log(data)\r\n            const params = {\r\n                ...data,\r\n            }\r\n            const res = await updateHotelInfoAPI(params)\r\n            if(res){\r\n                message.success('修改成功')\r\n                dispatch('getHotelById')\r\n            }\r\n        },\r\n        addOrder: async({ state, commit,dispatch }, data) => {\r\n            const res = await reserveHotelAPI(data)\r\n            console.log(res)\r\n            if(res){\r\n                message.success('预定成功')\r\n                window.location.reload()\r\n                dispatch('searchRoomlByDate',state.roomDate)\r\n                commit('set_orderModalVisible', false)\r\n            }\r\n        },\r\n        getOrderMatchCoupons: async({ state, commit }, data) => {\r\n            const res = await orderMatchCouponsAPI(data)\r\n            if(res){\r\n                commit('set_orderMatchCouponList', res)\r\n            }\r\n        },\r\n\r\n        getHotelMatch: async({ state, commit }, data) => {\r\n            \r\n            const res = await searchMultipleHotelAPI(data)\r\n            console.log(res)\r\n            if(res){\r\n                commit('set_hotelList', res)\r\n            }\r\n        },\r\n        addRoom: async({ state, dispatch, commit }) => {\r\n            console.log(state.addRoomParams)\r\n            const res = await addRoomAPI(state.addRoomParams)\r\n            if(res){\r\n                commit('set_addRoomModalVisible', false)\r\n                commit('set_addRoomParams', {\r\n                    roomType: '',\r\n                    hotelId: '',\r\n                    price: '',\r\n                    total: 0,\r\n                    curNum: 0,\r\n                    peopleNum: 0,\r\n                    breakfast: '',\r\n                })\r\n                message.success('添加成功')\r\n                window.location.reload()\r\n                dispatch('getHotelRoom',state.addRoomParams.hotelId)\r\n            }else{\r\n                message.error('添加失败')\r\n            }\r\n        },\r\n        deleteRoomById: async({ state, commit,dispatch }, id) => {\r\n            const res = await deleteRoomAPI(id)\r\n            console.log(res)\r\n            if(res){\r\n                message.success('删除成功')\r\n                window.location.reload()\r\n                dispatch('getHotelRoom',res)\r\n            }else{\r\n                message.error('删除失败')\r\n            }\r\n        },\r\n        changeRoom: async({ state, dispatch, commit },data) => {\r\n            console.log(data)\r\n            const res = await changeRoomAPI(data)\r\n            if(res){\r\n                message.success('添加成功')\r\n                window.location.reload()\r\n                dispatch('getHotelRoom',state.addRoomParams.hotelId)\r\n            }else{\r\n                message.error('添加失败')\r\n            }\r\n        },\r\n        deleteHotelById:async({state},id)=>{\r\n            const res=deleteHotelByIdAPI({'hotelId':id})\r\n            if(res){\r\n\r\n                window.location.reload()\r\n                message.success('删除成功')\r\n            }else{\r\n                message.error('删除失败')\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default hotel
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- front_end/src/store/modules/hotel.js	(revision 7562581bd420a0eb9727109057dd32fa52d88989)
+++ front_end/src/store/modules/hotel.js	(date 1593744840712)
@@ -223,7 +223,9 @@
             }
         },
         getOrderMatchCoupons: async({ state, commit }, data) => {
+            console.log(data)
             const res = await orderMatchCouponsAPI(data)
+            console.log(res)
             if(res){
                 commit('set_orderMatchCouponList', res)
             }
Index: front_end/src/views/user/components/enrollVIP.vue
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><template>\r\n    <a-modal\r\n            :visible=\"enrollVIPVisible\"\r\n            title=\"注册会员\"\r\n            cancelText=\"取消\"\r\n            okText=\"确定\"\r\n            @cancel=\"cancel\"\r\n            @ok=\"handleSubmit\"\r\n    >\r\n        <a-form :form=\"form\" style=\"margin-top: 30px\" v-bind=\"formItemLayout\">\r\n\r\n            <a-form-item label=\"会员类型\" v-bind=\"formItemLayout\">\r\n                   <a-select\r\n                           @change=\"changeVisible\"\r\n                           v-decorator=\"[\r\n                        'VIPType',\r\n                        {rules:[{required:true,message: '请选择注册会员的类型'}]}\r\n                    ]\">\r\n                    <a-select-option value=1>普通会员</a-select-option>\r\n                    <a-select-option value=2>企业会员</a-select-option>\r\n                </a-select>\r\n            </a-form-item>\r\n\r\n            <a-form-item label=\"企业名称\" v-bind=\"formItemLayout\" v-if=\"corporation\">\r\n                <a-input placeholder=\"请填写企业名称\" v-decorator=\"['name',{rules: [{required: true,message: '请填写企业名称'}]}]\"/>\r\n            </a-form-item>\r\n\r\n        </a-form>\r\n        <!-- 这里是添加策略模态框区域，请编写表单 -->\r\n    </a-modal>\r\n</template>\r\n<script>\r\n    import { mapGetters, mapMutations, mapActions } from 'vuex'\r\n    export default {\r\n        name: 'enrollVIP',\r\n        data() {\r\n            return {\r\n                formItemLayout: {\r\n                    labelCol: {\r\n                        xs: { span: 12 },\r\n                        sm: { span: 6 },\r\n                    },\r\n                    wrapperCol: {\r\n                        xs: { span: 24 },\r\n                        sm: { span: 16 },\r\n                    },\r\n                },\r\n                desc: ['terrible', 'bad', 'normal', 'good', 'wonderful'],\r\n                values:1,\r\n                corporation:false,\r\n            }\r\n        },\r\n        computed: {\r\n            ...mapGetters([\r\n                \"enrollVIPVisible\"\r\n            ])\r\n        },\r\n        beforeCreate() {\r\n            // 表单名默认为“form”\r\n            this.form = this.$form.createForm(this, { name: 'enrollVIP' });\r\n        },\r\n        mounted() {\r\n\r\n        },\r\n        methods: {\r\n            ...mapMutations([\r\n                'set_enrollVIPVisible',\r\n                'set_commentParams'\r\n            ]),\r\n            ...mapActions([\r\n                // addHotelCoupon：添加酒店策略接口\r\n                // 'addComment'\r\n                'enrollVIPi'\r\n            ]),\r\n            cancel() {\r\n                this.set_enrollVIPVisible(false)\r\n            },\r\n            changeVisible(v){\r\n                this.corporation=v==2?true:false;\r\n            },\r\n            changeType(v){\r\n                if( v == '3') {\r\n\r\n                }else{\r\n                    this.$message.warning('请实现')\r\n                }\r\n            },\r\n            handleSubmit(e) {\r\n\r\n                e.preventDefault();\r\n\r\n                this.form.validateFieldsAndScroll((err, values) => {\r\n                    if (!err) {\r\n\r\n                        const data = {\r\n                            // 这里添加接口参数\r\n                            // VIPType: this.form.getFieldValue('VIPType'),\r\n                            corporationName:this.form.getFieldValue('name')\r\n                        }\r\n                        if(data.corporationName==undefined){data.corporationName=\"\"}\r\n                        this.enrollVIPi(data)\r\n                        // this.set_commentParams(data)\r\n                        // this.addComment()\r\n                    }\r\n                });\r\n            },\r\n        }\r\n    }\r\n</script>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- front_end/src/views/user/components/enrollVIP.vue	(revision 7562581bd420a0eb9727109057dd32fa52d88989)
+++ front_end/src/views/user/components/enrollVIP.vue	(date 1593743163851)
@@ -16,7 +16,7 @@
                         'VIPType',
                         {rules:[{required:true,message: '请选择注册会员的类型'}]}
                     ]">
-                    <a-select-option value=1>普通会员</a-select-option>
+                    <a-select-option v-if="userInfo.isVIP==0" value=1>普通会员</a-select-option>
                     <a-select-option value=2>企业会员</a-select-option>
                 </a-select>
             </a-form-item>
@@ -52,7 +52,8 @@
         },
         computed: {
             ...mapGetters([
-                "enrollVIPVisible"
+                "enrollVIPVisible",
+                'userInfo'
             ])
         },
         beforeCreate() {
Index: front_end/src/store/modules/user.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import Vue from 'vue'\r\nimport router from '@/router'\r\nimport { getToken, setToken, removeToken } from '@/utils/auth'\r\nimport { resetRouter } from '@/router'\r\nimport { message } from 'ant-design-vue'\r\nimport {\r\n    loginAPI,\r\n    registerAPI,\r\n    getUserInfoAPI,\r\n    updateUserInfoAPI,\r\n    enrollVIPAPI\r\n} from '@/api/user'\r\n\r\n\r\nimport {\r\n    getUserOrdersAPI,\r\n    cancelOrderAPI,\r\n    commentAddApI,\r\n    getHistoryOrdersAPI\r\n} from '@/api/order'\r\nimport {dataToArray} from \"ant-design-vue/lib/vc-drawer/src/utils\";\r\n\r\nconst getDefaultState = () => {\r\n    return {\r\n        userId: '',\r\n        userInfo: {\r\n\r\n        },\r\n        userOrderList: [\r\n\r\n        ],\r\n\r\n    }\r\n}\r\n\r\nconst user = {\r\n    state : {userId: '',\r\n        userInfo: {\r\n            hotelid:-1,\r\n            corporationName:\"\"\r\n        },\r\n        enrollVIPVisible:false,\r\n        userOrderList: [],\r\n        historyOrderList:[],\r\n        addCommentVisible:false,\r\n        commentVisible:true,\r\n        activeOrderId:-1,\r\n        commentParams:{\r\n            userId:-1,\r\n            userName:\"\",\r\n            credit:100,\r\n            orderId:-1,\r\n            content:\"\",\r\n            rate:3,\r\n            hotelId:-1,\r\n            color:\"\",\r\n\r\n        }\r\n\r\n    },\r\n\r\n    mutations: {\r\n        reset_state: function(state) {\r\n            state.token = '',\r\n            state.userId = '',\r\n            state.userInfo = {\r\n                \r\n            },\r\n            state.userOrderList = []\r\n        },\r\n        set_enrollVIPVisible:(state,data)=>{\r\n            state.enrollVIPVisible=data\r\n        },\r\n        set_token: function(state, token){\r\n            state.token = token\r\n        },\r\n        set_email: (state, data) => {\r\n            state.email = data\r\n        },\r\n        set_addCommentVisible:(state,data)=>{\r\n\r\n            state.addCommentVisible=data\r\n\r\n        },\r\n        set_commentVisible:(state,data)=>{\r\n            state.commentVisible=data\r\n        },\r\n        set_activeOrderId:(state,data)=>{\r\n            state.activeOrderId=data\r\n        },\r\n        set_userId: (state, data) => {\r\n            state.userId = data\r\n        },\r\n        set_userInfo: (state, data) => {\r\n            state.userInfo = {\r\n                ...state.userInfo,\r\n                ...data\r\n            }\r\n        },\r\n        set_userOrderList: (state, data) => {\r\n            state.userOrderList = data\r\n        },\r\n        set_historyOrderList:(state,data)=>{\r\n            state.historyOrderList = data\r\n        },\r\n        set_commentParams:(state,data)=>{\r\n             state.commentParams={\r\n                 ...state.commentParams,\r\n                 ...data\r\n             }\r\n        },\r\n    },\r\n\r\n    actions: {\r\n        login: async ({ dispatch, commit }, userData) => {\r\n            const res = await loginAPI(userData)\r\n            if(res){\r\n                console.log(\"er\")\r\n                console.log(res)\r\n                setToken(res.id)\r\n                commit('set_userId', res.id)\r\n                dispatch('getUserInfo')\r\n                if(res.userType==\"HotelManager\")\r\n                    router.push( '/hotel/hotelDetail/'+ res.hotelid)\r\n                else if(res.userType==\"Saler\"){\r\n                    router.push('/saler/saler')\r\n                }\r\n                else if(res.userType==\"Admin\"){\r\n                    router.push('/admin/manageUser')\r\n                }\r\n                else\r\n                router.push('/hotel/hotelList')\r\n\r\n            }\r\n        },\r\n\r\n        register: async({ commit }, data) => {\r\n            console.log(data)\r\n            const res = await registerAPI(data)\r\n            if(res){\r\n                message.success('注册成功')\r\n            }\r\n        },\r\n        getUserInfo({ state, commit }) {\r\n            return new Promise((resolve, reject) => {\r\n              getUserInfoAPI(state.userId).then(response => {\r\n                const data = response\r\n                if (!data) {\r\n                  reject('登录已过期，请重新登录')\r\n                }\r\n                commit('set_userInfo', data)\r\n                commit('set_userId', data.id)\r\n                resolve(data)\r\n              }).catch(error => {\r\n                reject(error)\r\n              })\r\n            })\r\n        },\r\n        updateUserInfo: async({ state, dispatch }, data) => {\r\n            const params = {\r\n                id: state.userId,\r\n                ...data,\r\n            }\r\n            const res = await updateUserInfoAPI(params)\r\n            if(res){\r\n                message.success('修改成功')\r\n                dispatch('getUserInfo')\r\n            }\r\n        },\r\n        getUserOrders: async({ state, commit }) => {\r\n            const data = {\r\n                userId: Number(state.userId)\r\n            }\r\n            const res = await getUserOrdersAPI(data)\r\n            console.log(\"user\")\r\n            console.log(res)\r\n            if(res){\r\n                commit('set_userOrderList', res)\r\n                console.log(state.userOrderList)\r\n            }\r\n        },\r\n        getHistoryOrders: async({ state, commit },data) => {\r\n            console.log(data)\r\n            const params = {\r\n                userId: data[0],\r\n                hotelId: data[1],\r\n            }\r\n            const res = await getHistoryOrdersAPI(params)\r\n            console.log(res)\r\n            if(res){\r\n                commit('set_historyOrderList', res)\r\n                console.log(state.historyOrderList)\r\n            }\r\n        },\r\n        cancelOrder: async({ state, dispatch }, orderId) => {\r\n            const res = await cancelOrderAPI(orderId)\r\n            if(res) {\r\n                dispatch('getUserOrders')\r\n                message.success('撤销成功')\r\n            }else{\r\n                message.error('撤销失败')\r\n            }\r\n        },\r\n        logout: async({ commit }) => {\r\n            removeToken()\r\n            resetRouter()\r\n            commit('reset_state')\r\n        },\r\n          // remove token\r\n        resetToken({ commit }) {\r\n            return new Promise(resolve => {\r\n                removeToken() // must remove  token  first\r\n                commit('reset_state')\r\n                resolve()\r\n            })\r\n        },\r\n\r\n        addComment: async ({state,commit,dispatch})=>{\r\n            const res=await commentAddApI(state.commentParams)\r\n            console.log(\"addcomment\",res)\r\n            if(res){\r\n                    commit('set_addCommentVisible',false)\r\n                    message.success('评论成功')\r\n                    dispatch('getUserOrders')\r\n                    commit('set_commentVisible',true)\r\n\r\n            }\r\n            else{\r\n                message.error('添加失败')\r\n            }\r\n        },\r\n        enrollVIPi:async ({state,commit,dispatch},data)=>{\r\n            let value;\r\n            if(data.corporationName==\"\"){\r\n                value={'isVIP':1}\r\n            }\r\n            else {\r\n                value={...data}\r\n            }\r\n            const res=await enrollVIPAPI({\r\n                ...state.userInfo,\r\n                ...value\r\n            })\r\n            console.log(res)\r\n            if(!res){\r\n                commit('set_enrollVIPVisible',false)\r\n                message.success('注册成功')\r\n            }\r\n            else{\r\n                message.error('注册失败')\r\n            }\r\n\r\n        }\r\n    }\r\n}\r\nconst  a=1;\r\nexport default  user
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- front_end/src/store/modules/user.js	(revision 7562581bd420a0eb9727109057dd32fa52d88989)
+++ front_end/src/store/modules/user.js	(date 1593742038049)
@@ -244,6 +244,7 @@
             console.log(res)
             if(!res){
                 commit('set_enrollVIPVisible',false)
+                window.location.reload()
                 message.success('注册成功')
             }
             else{
Index: src/main/java/com/example/hotel/controller/coupon/CouponController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.hotel.controller.coupon;\r\n\r\nimport com.example.hotel.bl.coupon.CouponService;\r\nimport com.example.hotel.vo.CouponVO;\r\nimport com.example.hotel.vo.HotelTargetMoneyCouponVO;\r\nimport com.example.hotel.vo.OrderVO;\r\nimport com.example.hotel.vo.ResponseVO;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\n\r\n@RestController\r\n@RequestMapping(\"/api/coupon\")\r\npublic class CouponController {\r\n\r\n    @Autowired\r\n    private CouponService couponService;\r\n\r\n    @PostMapping(\"/hotelTargetMoney\")\r\n    public ResponseVO addHotelTargetMoneyCoupon(@RequestBody CouponVO CouponVO) {\r\n        CouponVO couponVO = couponService.addHotelTargetMoneyCoupon(CouponVO);\r\n        return ResponseVO.buildSuccess(couponVO);\r\n    }\r\n\r\n    @GetMapping(\"/hotelAllCoupons\")\r\n    public ResponseVO getHotelAllCoupons(@RequestParam Integer hotelId) {\r\n        System.out.println(couponService.getHotelAllCoupon(hotelId));\r\n        return ResponseVO.buildSuccess(couponService.getHotelAllCoupon(hotelId));\r\n    }\r\n\r\n    @GetMapping(\"/orderMatchCoupons\")\r\n    public ResponseVO getOrderMatchCoupons(@RequestParam Integer userId,\r\n                                           @RequestParam Integer hotelId,\r\n                                           @RequestParam Double orderPrice,\r\n                                           @RequestParam Integer roomNum,\r\n                                           @RequestParam String checkIn,\r\n                                           @RequestParam String checkOut) {\r\n        System.out.println(\"mapp\");\r\n        OrderVO requestOrderVO = new OrderVO();\r\n        System.out.println(\"1\");\r\n        requestOrderVO.setUserId(userId);\r\n        requestOrderVO.setHotelId(hotelId);\r\n        requestOrderVO.setPrice(orderPrice);\r\n        requestOrderVO.setRoomNum(roomNum);\r\n        System.out.println(\"2\");\r\n        requestOrderVO.setCheckInDate(checkIn);\r\n        System.out.println(\"3\");\r\n        requestOrderVO.setCheckOutDate(checkOut);\r\n        return ResponseVO.buildSuccess(couponService.getMatchOrderCoupon(requestOrderVO));\r\n    }\r\n\r\n    @PostMapping(\"/updateCouponInfo\")\r\n    public ResponseVO updateCouponInfo(@RequestBody CouponVO couponVO){\r\n\r\n        System.out.println(\"1\");\r\n        System.out.println(couponVO.getDescription());\r\n        couponService.updateCouponInfo(couponVO);\r\n        System.out.println(5);\r\n        return ResponseVO.buildSuccess(true);\r\n    }\r\n\r\n    @PostMapping(\"/deleteCoupon\")\r\n    public ResponseVO deleteCoupon(@RequestBody Integer id){\r\n        couponService.deleteCoupon(id);\r\n        return ResponseVO.buildSuccess(true);\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/com/example/hotel/controller/coupon/CouponController.java	(revision 7562581bd420a0eb9727109057dd32fa52d88989)
+++ src/main/java/com/example/hotel/controller/coupon/CouponController.java	(date 1593748723926)
@@ -1,6 +1,7 @@
 package com.example.hotel.controller.coupon;
 
 import com.example.hotel.bl.coupon.CouponService;
+import com.example.hotel.po.Coupon;
 import com.example.hotel.vo.CouponVO;
 import com.example.hotel.vo.HotelTargetMoneyCouponVO;
 import com.example.hotel.vo.OrderVO;
@@ -8,6 +9,9 @@
 import org.springframework.beans.factory.annotation.Autowired;
 import org.springframework.web.bind.annotation.*;
 
+import java.util.ArrayList;
+import java.util.List;
+
 
 @RestController
 @RequestMapping("/api/coupon")
@@ -37,7 +41,9 @@
                                            @RequestParam String checkOut) {
         System.out.println("mapp");
         OrderVO requestOrderVO = new OrderVO();
-        System.out.println("1");
+        System.out.println(userId);
+        System.out.println(hotelId);
+
         requestOrderVO.setUserId(userId);
         requestOrderVO.setHotelId(hotelId);
         requestOrderVO.setPrice(orderPrice);
@@ -46,7 +52,14 @@
         requestOrderVO.setCheckInDate(checkIn);
         System.out.println("3");
         requestOrderVO.setCheckOutDate(checkOut);
-        return ResponseVO.buildSuccess(couponService.getMatchOrderCoupon(requestOrderVO));
+        List<Coupon> oneList = couponService.getMatchHotelCoupon(userId,hotelId, orderPrice,roomNum,checkIn, checkOut);
+        List<Coupon> otherList=couponService.getMatchOrderCoupon(requestOrderVO);
+        for (int i = 0; i < otherList.size(); i++) {
+            oneList.add(otherList.get(i));
+        }
+        System.out.println(oneList);
+        System.out.println(otherList);
+        return ResponseVO.buildSuccess(oneList);
     }
 
     @PostMapping("/updateCouponInfo")
Index: src/main/java/com/example/hotel/blImpl/coupon/CouponServiceImpl.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.hotel.blImpl.coupon;\r\n\r\nimport com.example.hotel.bl.coupon.CouponService;\r\nimport com.example.hotel.bl.coupon.CouponMatchStrategy;\r\nimport com.example.hotel.data.coupon.CouponMapper;\r\nimport com.example.hotel.data.user.AccountMapper;\r\nimport com.example.hotel.po.Coupon;\r\nimport com.example.hotel.po.User;\r\nimport com.example.hotel.vo.CouponVO;\r\nimport com.example.hotel.vo.HotelTargetMoneyCouponVO;\r\nimport com.example.hotel.vo.OrderVO;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport java.text.SimpleDateFormat;\r\nimport java.time.LocalDateTime;\r\nimport java.time.format.DateTimeFormatter;\r\nimport java.util.ArrayList;\r\nimport java.util.Date;\r\nimport java.util.List;\r\n\r\n\r\n@Service\r\npublic class CouponServiceImpl implements CouponService {\r\n\r\n    private final  TargetMoneyCouponStrategyImpl targetMoneyCouponStrategy;\r\n    private final  TimeCouponStrategyImpl timeCouponStrategy;\r\n    private final  TargetRoomNumberCouponStrategylmpl targetRoomNumberCouponStrategy;\r\n    private final CouponMapper couponMapper;\r\n\r\n    private static List<CouponMatchStrategy> strategyList = new ArrayList<>();\r\n    @Autowired\r\n    AccountMapper accountMapper;\r\n\r\n    @Autowired\r\n    public CouponServiceImpl(TargetMoneyCouponStrategyImpl targetMoneyCouponStrategy,\r\n                             TimeCouponStrategyImpl timeCouponStrategy,TargetRoomNumberCouponStrategylmpl targetRoomNumberCouponStrategy,\r\n                             CouponMapper couponMapper) {\r\n        this.couponMapper = couponMapper;\r\n        this.targetMoneyCouponStrategy = targetMoneyCouponStrategy;\r\n        this.targetRoomNumberCouponStrategy=targetRoomNumberCouponStrategy;\r\n        this.timeCouponStrategy = timeCouponStrategy;\r\n        strategyList.add(targetMoneyCouponStrategy);\r\n        strategyList.add(timeCouponStrategy);\r\n        strategyList.add(targetRoomNumberCouponStrategy);\r\n    }\r\n\r\n\r\n\r\n    @Override\r\n    public List<Coupon> getMatchOrderCoupon(OrderVO orderVO) {\r\n\r\n        List<Coupon> hotelCoupons = getHotelAllCoupon(orderVO.getHotelId());\r\n\r\n        List<Coupon> availAbleCoupons = new ArrayList<>();\r\n\r\n        for (int i = 0; i < hotelCoupons.size(); i++) {\r\n            for (CouponMatchStrategy strategy : strategyList) {\r\n                if (strategy.isMatch(orderVO, hotelCoupons.get(i))) {\r\n                    availAbleCoupons.add(hotelCoupons.get(i));\r\n                }\r\n            }\r\n        }\r\n\r\n        return availAbleCoupons;\r\n    }\r\n    //找到订单满足的所有优惠策略\r\n\r\n    @Override\r\n    public List<Coupon> getHotelAllCoupon(Integer hotelId) {\r\n        List<Coupon> hotelCoupons = couponMapper.selectByHotelId(hotelId);\r\n        System.out.println(hotelCoupons);\r\n        return hotelCoupons;\r\n    }\r\n\r\n    @Override\r\n    public CouponVO addHotelTargetMoneyCoupon(CouponVO couponVO) {\r\n        //首先把VO对象转换成插入到数据库中的PO对象\r\n        Coupon coupon = new Coupon();\r\n        coupon.setCouponName(\"满减优惠\");\r\n        coupon.setDescription(couponVO.getDescription());\r\n        coupon.setCouponType(3);\r\n        coupon.setTargetMoney(couponVO.getTargetMoney());\r\n        coupon.setHotelId(couponVO.getHotelId());\r\n        coupon.setDiscountMoney(couponVO.getDiscountMoney());\r\n        coupon.setStartTime(couponVO.getStartTime());\r\n        coupon.setEndTime(couponVO.getEndTime());\r\n        coupon.setStatus(1);\r\n        int result = couponMapper.insertCoupon(coupon);\r\n        couponVO.setId(result);\r\n        return couponVO;\r\n    }\r\n\r\n    @Override\r\n    public void updateCouponInfo(CouponVO couponVO){\r\n        System.out.println(\"114514 1919810\");//判断前后端接口是否顺利接上的测试代码\r\n        System.out.println(\"114514 1919810\");\r\n        System.out.println(couponVO.getId());\r\n\r\n        couponMapper.updateCoupon(couponVO.getId(),couponVO.getDescription(),couponVO.getCouponName(),couponVO.getCouponType(),\r\n                couponVO.getStatus(),couponVO.getStartTime(),couponVO.getEndTime());\r\n    }\r\n\r\n    @Override\r\n    public void deleteCoupon(Integer id){\r\n        couponMapper.deleteCoupon(id);\r\n    }\r\n\r\n    @Override\r\n    public List<Coupon> getMatchHotelCoupon(int userid, int hotelid,double orderprice,int roomNum,String checkIn, String checkOut){\r\n        List<Coupon> hotelCoupons = getHotelAllCoupon(hotelid);\r\n\r\n        List<Coupon> availAbleCoupons = new ArrayList<>();\r\n\r\n        User user=accountMapper.getAccountById(userid);\r\n\r\n        String birthday=user.getBirthday();\r\n\r\n        LocalDateTime nowTime= LocalDateTime.now();\r\n\r\n        String ldt=DateTimeFormatter.ofPattern(\"yyyy-MM-dd HH:mm:ss\").format(LocalDateTime.now());\r\n\r\n        for (int i = 0; i < hotelCoupons.size(); i++) {\r\n            if(hotelCoupons.get(i).getCouponType()==1){\r\n                if( ldt.substring(0,10).equals(birthday)) {\r\n                    availAbleCoupons.add(hotelCoupons.get(i));\r\n\r\n                }\r\n                else\r\n                {\r\n                    hotelCoupons.get(i).setDiscount(0);\r\n                    hotelCoupons.get(i).setDiscountMoney(0);\r\n                    hotelCoupons.get(i).setDescription(hotelCoupons.get(i).getDescription()+\"未到生日\");\r\n                    availAbleCoupons.add(hotelCoupons.get(i));\r\n                }\r\n            }\r\n        }\r\n        return availAbleCoupons;\r\n\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/com/example/hotel/blImpl/coupon/CouponServiceImpl.java	(revision 7562581bd420a0eb9727109057dd32fa52d88989)
+++ src/main/java/com/example/hotel/blImpl/coupon/CouponServiceImpl.java	(date 1593748782763)
@@ -61,7 +61,9 @@
                 }
             }
         }
-
+        System.out.println("+++++");
+        System.out.println(availAbleCoupons);
+        System.out.println("+++++");
         return availAbleCoupons;
     }
     //找到订单满足的所有优惠策略
@@ -69,7 +71,7 @@
     @Override
     public List<Coupon> getHotelAllCoupon(Integer hotelId) {
         List<Coupon> hotelCoupons = couponMapper.selectByHotelId(hotelId);
-        System.out.println(hotelCoupons);
+//        System.out.println(hotelCoupons);
         return hotelCoupons;
     }
 
@@ -106,6 +108,7 @@
         couponMapper.deleteCoupon(id);
     }
 
+
     @Override
     public List<Coupon> getMatchHotelCoupon(int userid, int hotelid,double orderprice,int roomNum,String checkIn, String checkOut){
         List<Coupon> hotelCoupons = getHotelAllCoupon(hotelid);
Index: front_end/src/components/header.vue
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><template>\r\n    <div class=\"header\">\r\n        <div class=\"label\">\r\n            <img src=\"@/assets/logo2.png\" class=\"logo\" alt=\"logo\" @click=\"jumpToHome\">\r\n            <span class=\"title1\">vactionLight</span>\r\n            <span class=\"title2\"> 酒店管理系统</span>\r\n\r\n        </div>\r\n        <a-menu v-model=\"current\" mode=\"horizontal\" theme=\"light\">\r\n            <a-menu-item key=\"1\" @click=\"selectMenu\" v-if=\"userInfo.userType=='Client'||userInfo.userType=='Admin'\">\r\n                <router-link to=\"/hotel/hotelList\">\r\n                    <a-icon type=\"home\" />首页\r\n                </router-link>\r\n            </a-menu-item>\r\n\r\n            <a-menu-item key=\"1\" @click=\"selectMenu2\" v-if=\"userInfo.userType=='HotelManager'\">\r\n                <router-link to=\"/hotel/hotelDetail\">\r\n                    <a-icon type=\"home\" />首页\r\n                </router-link>\r\n            </a-menu-item>\r\n            <a-menu-item key=\"6\" @click=\"selectMenu3\" v-if=\"userInfo.userType=='Saler'\">\r\n                <router-link to=\"/saler/saler\">\r\n                    <a-icon type=\"home\" />网站营销\r\n                </router-link>\r\n            </a-menu-item>\r\n\r\n            <a-menu-item key=\"2\" @click=\"jumpToUserInfo\" v-if=\"userInfo.userType=='Client'\">\r\n                <a-icon type=\"user\" />个人中心\r\n            </a-menu-item>\r\n            <a-menu-item key=\"3\" @click=\"selectMenu\" v-if=\"userInfo.userType=='HotelManager'\">\r\n                <router-link :to=\"{ name: 'manageHotel'}\">\r\n                    <a-icon type=\"switcher\" />酒店管理\r\n                </router-link>\r\n            </a-menu-item>\r\n            <a-menu-item key=\"4\" @click=\"selectMenu\" v-if=\"userInfo.userType=='Admin'\">\r\n                <router-link :to=\"{ name: 'manageUser'}\">\r\n                    <a-icon type=\"user\" />账户管理\r\n                </router-link>\r\n            </a-menu-item>\r\n            <a-menu-item key=\"5\" @click=\"selectMenu\" v-if=\"userInfo.userType=='Saler'\">\r\n                <router-link :to=\"{ name: 'credit'}\">\r\n                    <a-icon type=\"user\" />信用充值\r\n                </router-link>\r\n            </a-menu-item>\r\n        </a-menu>\r\n        <div class=\"logout\">\r\n            <a-dropdown placement=\"bottomCenter\">\r\n                <div class=\"user\">\r\n                    <a-avatar icon=\"user\"></a-avatar>\r\n                    <span style=\"font-size: 14px\">{{ userInfo.userName }}</span>\r\n                    <a-icon style=\"margin-left: 3px; font-size: 16px\" type=\"down\"></a-icon>\r\n                </div>\r\n                <a-menu slot=\"overlay\">\r\n                    <a-menu-item  @click=\"jumpToHome()\">\r\n                        <a-icon type=\"home\"></a-icon>\r\n                        首页\r\n                    </a-menu-item>\r\n                    <a-menu-item @click=\"jumpToUserInfo()\">\r\n                        <a-icon type=\"profile\"></a-icon>\r\n                        我的信息\r\n                    </a-menu-item>\r\n                    <a-menu-item @click=\"beVIP()\" v-if=\"userInfo.userType=='Client'\">\r\n                        <a-icon type=\"crown\" />\r\n                        注册会员\r\n                    </a-menu-item>\r\n                    <a-menu-item @click=\"quit()\">\r\n                        <a-icon type=\"poweroff\"></a-icon>\r\n                        退出登录\r\n                    </a-menu-item>\r\n                </a-menu>\r\n            </a-dropdown>\r\n        </div>\r\n        <enrollVIP></enrollVIP>\r\n    </div>\r\n\r\n</template>\r\n<script>\r\n    import { mapGetters, mapActions, mapMutations } from 'vuex'\r\n    import enrollVIP from \"../views/user/components/enrollVIP\";\r\n    export default {\r\n        name: '',\r\n        data() {\r\n            return {\r\n                current: ['1']\r\n            }\r\n        },\r\n        components:{\r\n            enrollVIP,\r\n        },\r\n        computed: {\r\n            ...mapGetters([\r\n                'userId',\r\n                'userInfo',\r\n                'manageId',\r\n                'enrollVIPVisible',\r\n            ])\r\n        },\r\n        async mounted() {\r\n            await this.getUserInfo()\r\n            if (this.$route.name == 'hotelList' || this.$route.name == 'hotelDetail') {\r\n                this.current = ['1']\r\n            }else if(this.$route.name == 'userInfo') {\r\n                this.current = ['2']\r\n            }else if(this.$route.name == 'manageHotel') {\r\n                this.current = ['3']\r\n            }else {\r\n                this.current = ['4']\r\n            }\r\n        },\r\n        methods: {\r\n            ...mapMutations([\r\n                'set_enrollVIPVisible',\r\n            ]),\r\n            ...mapActions([\r\n                'logout',\r\n                'getUserInfo',\r\n                'enrollVIPi'\r\n            ]),\r\n            selectMenu(v){\r\n            },\r\n            selectMenu2(v){\r\n                this.$router.push({ name: 'hotelDetail', params: { hotelId: this.manageId}})\r\n                // this.$router.push({ name: 'hotelDetail'})\r\n            },\r\n            selectMenu3(v){\r\n                // this.$route.push({name:'saler'})\r\n            },\r\n            beVIP(){\r\n                this.set_enrollVIPVisible(true)\r\n            },\r\n            async quit() {\r\n                await this.$store.dispatch('logout')\r\n                this.$router.push(`/login?redirect=${this.$route.fullPath}`)\r\n            },\r\n            jumpToUserInfo() {\r\n                this.$router.push({ name: 'userInfo', params: { userId: this.userId } })\r\n            },\r\n            jumpToHome() {\r\n\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n    .header {\r\n        display: flex;\r\n        line-height: 44px;\r\n        height: 44px;\r\n        align-items: center;\r\n        justify-content: space-between;\r\n        min-width: 800px;\r\n        .label{\r\n            height: 44px;\r\n            line-height: 44px;\r\n            vertical-align: middle;\r\n            min-width: 400px;\r\n\r\n\r\n            .logo {\r\n                height: 44px;\r\n                vertical-align: top;\r\n                margin-right: 16px;\r\n                border-style: none;\r\n                cursor: pointer;\r\n            }\r\n\r\n            .title1 {\r\n                font-size: 35px;\r\n                color: rgba(0, 0, 0, .85);\r\n                font-family: Avenir, 'STXingkai', Arial, Helvetica, sans-serif;\r\n                font-weight: 600;\r\n                position: relative;\r\n                top: 2px;\r\n            }\r\n            .title2 {\r\n                font-size: 32px;\r\n                color: rgba(0, 0, 0, .85);\r\n                font-family: Avenir, 'WenQuanYi Micro Hei', Arial, Helvetica, sans-serif;\r\n                font-weight: 600;\r\n                position: relative;\r\n                top: 2px;\r\n            }\r\n\r\n            .search {\r\n                width: 300px;\r\n                margin-left: 30px\r\n            }\r\n        }\r\n        .logout {\r\n            margin-right: 40px;\r\n            .user {\r\n                cursor: pointer;\r\n                display:flex;\r\n                align-items: center;\r\n                span {\r\n                    margin-left: 5px\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n</style>\r\n<style lang=\"less\">\r\n    .header {\r\n        .ant-menu {\r\n            background: none\r\n        }\r\n    }\r\n</style>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- front_end/src/components/header.vue	(revision 7562581bd420a0eb9727109057dd32fa52d88989)
+++ front_end/src/components/header.vue	(date 1593741454550)
@@ -126,7 +126,14 @@
                 // this.$route.push({name:'saler'})
             },
             beVIP(){
-                this.set_enrollVIPVisible(true)
+                if(this.userInfo.isVIP>0){
+                    this.$notification.open({
+                        message: '注册提示',
+                        description:
+                            '您已注册会员。请在会员中心查看详情',
+                })
+                }
+                else{this.set_enrollVIPVisible(true)}
             },
             async quit() {
                 await this.$store.dispatch('logout')
Index: front_end/src/views/saler/saler.vue
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><template>\r\n    <div class=\"saler-coupon\">\r\n        <a-tabs>\r\n            <a-tab-pane tab=\"网站优惠策略\" key=\"1\">\r\n                <a-row>\r\n                    <a-col :span=\"12\">\r\n                        优惠详情\r\n                        <a-switch default-checked @change=\"onChange\">\r\n                            <a-icon slot=\"checkedChildren\" type=\"check\" />\r\n                            <a-icon slot=\"unCheckedChildren\" type=\"close\" /></a-switch>\r\n                        <a-divider type=\"vertical\"></a-divider>\r\n                    </a-col>\r\n                    <a-col :span=\"6\" :offset=\"1\">\r\n                        <a-button type=\"primary\" @click=\"addCoupon\"><a-icon type=\"plus\" />添加优惠策略</a-button>\r\n                    </a-col>\r\n                </a-row>\r\n                <a-divider ></a-divider>\r\n                <a-list :grid=\"{ gutter: 16, column: 2 }\" :data-source=\"allCouponlist\">\r\n                    <a-list-item slot=\"renderItem\" slot-scope=\"item\">\r\n                        <a-card style=\"width:100%\" :title=\"item.couponName\">\r\n                            <a slot=\"extra\" >\r\n                                <a-button type=\"primary\" size='small' @click=\"changeCoupon(item.id)\">\r\n                                    修改\r\n                                </a-button>\r\n                                <a-button type=\"danger\" size=\"small\" style=\"margin-left: 20px\" @click=\"deleteCouponB(item.id)\">\r\n                                    删除\r\n                                </a-button>\r\n                            </a>\r\n                            <a-tabs default-active-key=\"1\" @change=\"callback\" v-if=\"modify\">\r\n                                <a-tab-pane key=\"2\" tab=\"优惠简介\" >\r\n                                    <a-tag color=\"pink\">\r\n                                        {{item.description}}\r\n                                    </a-tag>\r\n                                </a-tab-pane>\r\n                                <a-tab-pane key=\"1\" tab=\"活动日期\" force-render>\r\n                                    <a-timeline>\r\n                                    <a-timeline-item>Create at {{item.startDate}}</a-timeline-item>\r\n                                    <a-timeline-item color=\"green\">\r\n                                        End at {{item.endDate}}\r\n                                    </a-timeline-item>\r\n                                    </a-timeline>\r\n                                </a-tab-pane>\r\n                                <a-tab-pane key=\"3\" tab=\"优惠内容\">\r\n                                    折扣{{item.discount}}\r\n                                    达标金额{{item.targetMoney}}\r\n                                    优惠金额{{item.discountMoney}}\r\n                                </a-tab-pane>\r\n                            </a-tabs>\r\n                        </a-card>\r\n\r\n                    </a-list-item>\r\n                    <a-list-item>\r\n\r\n                    </a-list-item>\r\n                </a-list>\r\n            </a-tab-pane>\r\n            <a-tab-pane tab=\"广告投放\" key=\"2\">\r\n                    <a-upload\r\n                            action=\"https://www.mocky.io/v2/5cc8019d300000980a055e76\"\r\n                            list-type=\"picture\"\r\n                            :file-list=\"fileList\"\r\n                            :customRequest=\"testUpload\"\r\n                    >\r\n                        <a-button > <a-icon type=\"upload\" /> upload </a-button>\r\n                    </a-upload>\r\n            </a-tab-pane>\r\n            <a-tab-pane tab=\"酒店优惠策略\" key=\"3\">\r\n                <InfoCard :hotel=\"item\" v-for=\"item in hotelList\" :key=\"item.index\" @click.native=\"jumpToDetails(item.id)\"></InfoCard>\r\n            </a-tab-pane>\r\n        </a-tabs>\r\n        <AddCouponModal></AddCouponModal>\r\n        <UpdateCoupon></UpdateCoupon>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    let OSS = require('ali-oss');\r\n    // let client=new OSS({\r\n    //      accessKeyId:'LTAI4G5y6f1Hk4R5wVsPbQZ4',\r\n    //      accessKeySecret:'Aw3CbQFmBw8vyk7lmW3j1jL7LL6xpn',\r\n    //      bucket:'test-nju-1',\r\n    //      region:'oss-cn-shenzhen',\r\n    //      secure: true,\r\n    // })\r\n    let client=new OSS({\r\n        accessKeyId:'LTAI4GAh9znuBWPxpPX1q5z5',\r\n        accessKeySecret:'2s6H9ljuP6oO3aqLosalsUfTx35siO',\r\n        bucket:'obsidian222',\r\n        region:'oss-cn-shenzhen',\r\n        secure: true,\r\n    })\r\n    function getBase64(file) {\r\n        return new Promise((resolve, reject) => {\r\n            const reader = new FileReader();\r\n            reader.readAsDataURL(file);\r\n            reader.onload = () => resolve(reader.result);\r\n            reader.onerror = error => reject(error);\r\n        });\r\n    }\r\n    const data = [\r\n        {\r\n            id:1,\r\n            title: '优惠 1',\r\n            description:'双十一满减，买买买买买买mmp',\r\n            type:'',\r\n            name:'',\r\n            targetMoney:0,\r\n            discountMoney:0,\r\n            discount:0,\r\n            startDate:'2000-01-02',\r\n            endDate:'2000-2-14',\r\n        },\r\n        {\r\n            title: '优惠 2',\r\n            description:'生日优惠',\r\n            type:'',\r\n            name:'',\r\n            targetMoney:0,\r\n            discountMoney:0,\r\n            discount:0,\r\n            startDate:'2000-01-02',\r\n            endDate:'2000-2-14',\r\n        },\r\n        {\r\n            title: '优惠 3',\r\n            description:'双十一满减',\r\n            type:'',\r\n            name:'',\r\n            targetMoney:0,\r\n            discountMoney:0,\r\n            discount:0,\r\n            startDate:'2000-01-02',\r\n            endDate:'2000-2-14',\r\n        },\r\n        {\r\n            title: '优惠 4',\r\n            description:'双十一满减',\r\n            type:'',\r\n            name:'',\r\n            targetMoney:0,\r\n            discountMoney:0,\r\n            discount:0,\r\n            startDate:'2000-01-02',\r\n            endDate:'2000-2-14',\r\n        },\r\n        {\r\n            title: '优惠 5',\r\n            description:'双十一满减',\r\n            type:'',\r\n            name:'',\r\n            targetMoney:0,\r\n            discountMoney:0,\r\n            discount:0,\r\n            startDate:'2000-01-02',\r\n            endDate:'2000-2-14',\r\n        },\r\n        {\r\n            title: '优惠 6',\r\n            description:'双十一满减',\r\n            type:'',\r\n            name:'',\r\n            targetMoney:0,\r\n            discountMoney:0,\r\n            discount:0,\r\n            startDate:'2000-01-02',\r\n            endDate:'2000-2-14',\r\n        },\r\n    ];\r\n    import { mapGetters, mapMutations, mapActions } from 'vuex'\r\n    import AddCouponModal from './components/addCouponModal'\r\n    import UpdateCoupon from './components/updateCoupon'\r\n    import InfoCard from \"./components/infoCard\";\r\n    const moment = require('moment')\r\n    export default {\r\n        name: \"saler\",\r\n        data(){\r\n            return{\r\n                data,\r\n                previewImage: '',\r\n                modify: true,\r\n                picList:Array,\r\n\r\n            }\r\n        },\r\n        components:{\r\n            AddCouponModal,\r\n            UpdateCoupon,\r\n            InfoCard\r\n        },\r\n        async mounted() {\r\n            await this.getFileList()\r\n            await this.getAllCoupon()\r\n\r\n            console.log(\"list\",this.fileList)\r\n        },\r\n        computed: {\r\n            ...mapGetters([\r\n                'hotelList',\r\n                'updateCouponVisible',\r\n                'addCouponModalVisible',\r\n                'allCouponlist',\r\n                'fileList'\r\n            ]),\r\n        },\r\n        methods:{\r\n            ...mapMutations([\r\n                'set_addCouponModalVisible',\r\n                'set_updateCouponVisible',\r\n                'set_currentCouponId'\r\n            ]),\r\n            ...mapActions([\r\n                'getAllCoupon',\r\n                'deleteCoupon',\r\n                'getFileList',\r\n                'addAD'\r\n            ]),\r\n            onChange(checked) {\r\n                if(checked)\r\n                    this.modify=true;\r\n                else this.modify=false;\r\n                console.log(`a-switch to ${checked}`);\r\n            },\r\n            addCoupon() {\r\n                console.log(\"!!!!\")\r\n                this.set_addCouponModalVisible(true)\r\n                this.getAllCoupon()\r\n            },\r\n            changeCoupon(id){\r\n                this.set_currentCouponId(id)\r\n                this.set_updateCouponVisible(true)\r\n                this.getAllCoupon()\r\n            },\r\n            deleteCouponB(id){\r\n                this.deleteCoupon(id);\r\n                this.getAllCoupon()\r\n            },\r\n            callback(){},\r\n            async testUpload(file){\r\n                console.log(file)\r\n\r\n                try {\r\n                    //object-name可以自定义为文件名（例如file.txt）或目录（例如abc/test/file.txt）的形式，实现将文件上传至当前Bucket或Bucket下的指定目录。\r\n                    let result = await client.put(file.file.name, file.file);\r\n                    console.log(result);\r\n                    console.log(\"ipresult\")\r\n                    const tempData={\r\n                        uid:(-1*this.fileList.length-1).toString(),\r\n                        name:result.name,\r\n                        status:'done',\r\n                        url:result.url,\r\n                        thumbUrl:result.url\r\n                    }\r\n                    await this.addADs(tempData)\r\n\r\n                } catch (e) {\r\n                    console.log(e);\r\n                }\r\n                return new Promise(resolve => {\r\n                    // const reader = new FileReader();\r\n                    // reader.readAsDataURL(file);\r\n                    // reader.onload = () => {\r\n                    //     const canvas = document.createElement('canvas');\r\n                    //     const img = document.createElement('img');\r\n                    //     img.src = reader.result;\r\n                    //     img.onload = () => {\r\n                    //         const ctx = canvas.getContext('2d');\r\n                    //         ctx.drawImage(img, 0, 0);\r\n                    //         ctx.fillStyle = 'red';\r\n                    //         ctx.textBaseline = 'middle';\r\n                    //         ctx.fillText('Ant Design', 20, 20);\r\n                    //         canvas.toBlob(resolve);\r\n                    //     };\r\n                    // };\r\n                });\r\n            },\r\n            async addADs(pic){\r\n                await this.addAD(pic)\r\n                await this.getFileList()\r\n                console.log(\"???\",this.fileList)\r\n            }\r\n        }\r\n\r\n    }\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n    .saler-coupon {\r\n        .hotelCard {\r\n            margin: 10px 10px;\r\n            min-width: 180px;\r\n            max-height: 350px;\r\n        }\r\n    }\r\n</style>\r\n<style lang=\"less\">\r\n    .manageHotel-wrapper {\r\n        .ant-tabs-bar {\r\n            padding-left: 30px\r\n        }\r\n    }\r\n</style>\r\n<style lang=\"less\">\r\n\r\n</style>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- front_end/src/views/saler/saler.vue	(revision 7562581bd420a0eb9727109057dd32fa52d88989)
+++ front_end/src/views/saler/saler.vue	(date 1593743535892)
@@ -34,9 +34,9 @@
                                 </a-tab-pane>
                                 <a-tab-pane key="1" tab="活动日期" force-render>
                                     <a-timeline>
-                                    <a-timeline-item>Create at {{item.startDate}}</a-timeline-item>
+                                    <a-timeline-item>Create at {{item.startTime}}</a-timeline-item>
                                     <a-timeline-item color="green">
-                                        End at {{item.endDate}}
+                                        End at {{item.endTime}}
                                     </a-timeline-item>
                                     </a-timeline>
                                 </a-tab-pane>
@@ -47,10 +47,8 @@
                                 </a-tab-pane>
                             </a-tabs>
                         </a-card>
-
                     </a-list-item>
                     <a-list-item>
-
                     </a-list-item>
                 </a-list>
             </a-tab-pane>
@@ -64,9 +62,6 @@
                         <a-button > <a-icon type="upload" /> upload </a-button>
                     </a-upload>
             </a-tab-pane>
-            <a-tab-pane tab="酒店优惠策略" key="3">
-                <InfoCard :hotel="item" v-for="item in hotelList" :key="item.index" @click.native="jumpToDetails(item.id)"></InfoCard>
-            </a-tab-pane>
         </a-tabs>
         <AddCouponModal></AddCouponModal>
         <UpdateCoupon></UpdateCoupon>
@@ -169,7 +164,6 @@
     import { mapGetters, mapMutations, mapActions } from 'vuex'
     import AddCouponModal from './components/addCouponModal'
     import UpdateCoupon from './components/updateCoupon'
-    import InfoCard from "./components/infoCard";
     const moment = require('moment')
     export default {
         name: "saler",
@@ -185,12 +179,11 @@
         components:{
             AddCouponModal,
             UpdateCoupon,
-            InfoCard
         },
         async mounted() {
             await this.getFileList()
             await this.getAllCoupon()
-
+            console
             console.log("list",this.fileList)
         },
         computed: {
Index: src/main/java/com/example/hotel/vo/ResponseVO.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.hotel.vo;\r\n\r\n/**\r\n * @author fjj\r\n * @date 2019/3/12 5:14 PM\r\n */\r\npublic class ResponseVO {\r\n\r\n    /**\r\n     * 调用是否成功\r\n     */\r\n    private Boolean success;\r\n\r\n    /**\r\n     * 返回的提示信息\r\n     */\r\n    private String message;\r\n\r\n    /**\r\n     * 内容\r\n     */\r\n    private Object content;\r\n\r\n    public static ResponseVO buildSuccess(){\r\n        ResponseVO response=new ResponseVO();\r\n        response.setSuccess(true);\r\n        return response;\r\n    }\r\n\r\n    public static ResponseVO buildSuccess(Object content){\r\n        ResponseVO response=new ResponseVO();\r\n        response.setContent(content);\r\n        response.setSuccess(true);\r\n        return response;\r\n    }\r\n\r\n    public static ResponseVO buildFailure(String message){\r\n        ResponseVO response=new ResponseVO();\r\n        response.setSuccess(false);\r\n        response.setMessage(message);\r\n        System.out.println(message);\r\n        return response;\r\n    }\r\n\r\n    public boolean getSuccess() {\r\n        return success;\r\n    }\r\n\r\n    public void setSuccess(boolean success) {\r\n        this.success = success;\r\n    }\r\n\r\n    public String getMessage() {\r\n        return message;\r\n    }\r\n\r\n    public void setMessage(String message) {\r\n        this.message = message;\r\n    }\r\n\r\n    public Object getContent() {\r\n        return content;\r\n    }\r\n\r\n    public void setContent(Object content) {\r\n        this.content = content;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/com/example/hotel/vo/ResponseVO.java	(revision 7562581bd420a0eb9727109057dd32fa52d88989)
+++ src/main/java/com/example/hotel/vo/ResponseVO.java	(date 1593746261123)
@@ -31,6 +31,7 @@
         ResponseVO response=new ResponseVO();
         response.setContent(content);
         response.setSuccess(true);
+        System.out.println(response.getContent());
         return response;
     }
 
